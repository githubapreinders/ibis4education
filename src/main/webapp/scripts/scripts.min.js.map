{"version":3,"sources":["scripts.min.js"],"names":["app","angular","module","config","$stateProvider","$urlRouterProvider","state","url","views","content","templateUrl","controller","content@","otherwise","$scope","$interval","$timeout","xmlTag","attributeObject","StaticDataFactory","StorageFactory","EditorFactory","ValidationFactory","IafFactory","ZipService","ModeratorFactory","toggleTab","thetab","vm","showeditor","showauth","elem","document","getElementById","classList","toggle","theothers","_","without","thetabs","forEach","el","ele","remove","setAvailableLesson","which","saveInSlot","timerId","showSpinnerSmall","thekey","getGetter","getCurrentKey","title","getSetter","thedocument","getValue","setTimerId","toggleSpinner","showSpinner","sendZip","then","res","style","background","err","setCredentials","iaf_url","username","password","validateXml","currentKey","validationMessage","changeFontSize","ed","getElementsByClassName","fontSize","selectedFontSize","toString","getEditor","_editor","editor","editorLoaded","getDoc","getJson","response","navigatorModel","JSON","parse","data","JSONMONSTER","MYMONSTER","Object","keys","item","index","type","availableLessons","push","length","setOption","schemaInfo","foldCode","CodeMirror","Pos","lineCount","toggle_datasource","showNav","showConf","initialise","retrieveData","setIAFURL","toggleReadonly","akey","setReadonly","isLocked","val","unlock","changeTheme","selectedTheme","modifyAlias","slotn","newname","toggleSlot","key","switchKey","$broadcast","storeData","myalias","myvalue","mykey","alias","undefined","setValue","getTimerId","navigator","showConfig","left","navItem","picture","iplogo","showNavigator","width","top","add","setSelectedClass","selectedItem","setSelectedItem","selectedProperties","i","properties","checkbox","click","thetype","setDataSource","datasource","getDataSource","showPropertyDescription","done","parking","clearEditor","getOption","setCursor","line","lastLine","ch","focus","styleEditorContent","isTheBetter","newpos","oldpos","standard","linedifference1","Math","abs","linedifference2","chardifference1","chardifference2","pos","getCursor","before","getRange","beforesegment","match","after","aftersegment","cursor","getSearchCursor","counter","original","myindex","find","newval","to","settings","getFormattingSettings","html_beautify","checkDefaults","property","Array","submitForm","replaceSelection","xml","theproperties","newtag","classname","toCompleteTag","this","codemirrorLoaded","message","userInput","showFullEditor","showValidationMessage","themes","getThemes","fontSizes","getFontSizes","$on","filter","items","filtered","sort","a","b","x","toLowerCase","y","newstring","replace","newerstring","directive","restrict","link","scope","attrs","bind","event","traverseArray","sublist","id","digit","theobject","element","siblings","$parentNodesScope","$modelValue","s","text","innerHTML","cropFilter","theslot","vm2","mySlots","oldalias","changeKeys","myslots","setAttribute","$apply","list","nodes","helper","substring","lastIndexOf","target","thelist","code","keyCode","eventt","charCode","preventDefault","blur","heading","itemnumber","elemt","input","checked","value","require","ngModel","read","$setViewValue","html","$render","$viewValue","oldvalue","selectedProperty","newvalue","theattrs","defineProperty","getOwnPropertyDescriptor","$uibModal","postJsonBulk","description","checkForXml","loadXml","postTag","addNewClass","newProperty","addingProperty","addingItem","dataModel","otherSlot","currentSlotNumber","myslot","changeAttr","addProperty","string","propname","propdes","propdef","unshift","deleteProperty","splice","showModel","displayItem","stringify","open","windowClass","resolve","confirmDelete","animation","size","backdrop","result","deleteItem","stopTimer","getStaticJson","getSelectedItem","$uibModalInstance","closeModal","close","currentLesson","getAvailableLessons","src","factory","$http","API_URL","availableLesson","json","post","resp","postSchema","method","constant","IAF_URL","timerid","cancel","formattingSettings","get","thejson","error","indent_size","end_with_newline","js","css","preserve-newlines","DOWNLOAD_URL","UPLOAD_URL","PROJECTNAME","init","getSlots","getMySlots","saveas","Promise","reject","zip","JSZip","elements","querySelectorAll","object","parents","$parentNodeScope","filename","pop","isDirectory","folder","file","timestamp","Date","now","generateAsync","myzip","blob","Blob","saveAs","postConfig","finalurl","fileName","fd","FormData","append","headers","Content-type","getZipFromFile","loadAsync","storeZip","myzipfiles","async","newslotname","ceil","random","name","isParent","possibleparent","candidate","deleteAll","relativePath","indexOf","myjson","dir","myobj","val1","val2","split","parentsfound","copy","j","getZip","responseType","setCurrentKey","storage","$log","oldname","islocked","thekeys","getKeys","shift","getNewSlotname","createdAlias","theid","2","createKeys","getAliases","output","thealiases","verifyKey","api","setter","getter","isUndefined","Error","hasOwnProperty","createAPIForKey","createSetter","createGetter","isDefined","set","info","completeAfter","cm","pred","setTimeout","completionActive","showHint","completeSingle","Pass","completeIfAfterLt","cur","completeIfInTag","tok","getTokenAt","test","charAt","inner","innerMode","getMode","tagName","bothTags","extraKeys","'<'","'/'","' '","'='","Ctrl-Space","windowheight","window","innerHeight","navbarheight","offsetHeight","querySelector","height","thexml","validateXML","server","uname","pw","apiurl","showZipDialog","modalInstance","rendered","zipfromfile","addEventListener","returntype","files","setSelectedSlot","saveToFile","addFileOrFolder","newobject","floor","createRandomSuffix","$emit","selectedSlot","changeName","textnode","firstChild","caret","range","createRange","setStart","setEnd","sel","getSelection","removeAllRanges","addRange","deleteFromLocalStorage","itsid","thealias","deleteContainingFiles","findResults","results","array","$childNodesScope","getRoot","obj","ok","lookForDirectory","callerid","nodetype","currentLayer","newSubitem","theitem","thetitle","suffixes","randomdigit","letter","treeOptions","$watch","getZipOverHttp","vm3","elementname","proparray","tagType","elementName","tagProperties","prop","getAttributeName","getAttributeValues","staticPipenames","prototype","getTagType","setTagType","astring","returnstring","itsproperties","convertToPipe","toObject","setProperty","getPropertyValue","search","includes","attributename","values","hasDefault","setAttributeValue","unShift","insertValues","setDefaultValue","bool","join"],"mappings":"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","file":"scripts.min.js","sourcesContent":["(function()\n{\n    var app = angular.module('confab',['ngAnimate','ui.bootstrap','ui.tree', 'ui.router', 'ui.codemirror','ngCookies','angularLocalStorage']);\n\n\napp.config(function ($stateProvider, $urlRouterProvider)\n{\n    void 0;\n    $stateProvider\n\n        .state('app', {\n            url: '/',\n            views: {\n                'content': {\n                    templateUrl: 'views/home.html',\n                    controller: 'IndexController as vm'\n                }\n            }\n        })\n        .state('app.moderator', {\n            url:'moderator',\n            views: {\n                'content@': {\n                    templateUrl : 'views/moderator.html',\n                    controller  : 'ModeratorController as vm'\n                }\n            }\n        })\n        .state('app.courseinfo', {\n            url:'courseinfo',\n            views: {\n                'content@': {\n                    templateUrl : 'views/courseinfo.html',\n                    controller  : 'CourseInfoController as vm'\n                }\n            }\n        })\n\n\n\n    ;\n    $urlRouterProvider.otherwise('/');\n\n\n    });\n\n})();\n(function (){\n    'use strict';\n\n    angular.module('confab')\n        .controller('IndexController', function ($scope,$interval,$timeout, xmlTag, attributeObject, StaticDataFactory, StorageFactory, EditorFactory, ValidationFactory, IafFactory, ZipService,ModeratorFactory)\n        {\n\n            void 0;\n            var vm = this;\n\n            vm.submitForm = submitForm;\n            vm.codemirrorLoaded = getEditor;\n            vm.setSelectedClass = setSelectedClass;\n            vm.toggle_datasource = toggle_datasource;\n            vm.styleEditorContent = styleEditorContent;\n            vm.clearEditor = clearEditor;\n            vm.showNav = showNav;\n            vm.showConf = showConf;\n            vm.storeData = storeData;\n            vm.retrieveData = retrieveData;\n            vm.toggleSlot = toggleSlot;\n            vm.modifyAlias = modifyAlias;\n            vm.checkDefaults = checkDefaults;\n            vm.changeTheme = changeTheme;\n            vm.changeFontSize = changeFontSize;\n            vm.validateXml = validateXml;\n            vm.sendZip = sendZip;\n            vm.toggleSpinner = toggleSpinner;\n            vm.setCredentials = setCredentials;\n            vm.setAvailableLesson = setAvailableLesson;\n            vm.toggleReadonly = toggleReadonly;\n            vm.unlock = unlock;\n\n            vm.message = \"Angular Controller is working allright...\";\n            vm.userInput = \"\";\n            vm.datasource = StaticDataFactory.getDataSource();\n            vm.navigatorModel = null;\n            vm.selectedItem = null;\n            vm.showPropertyDescription = false;\n            vm.selectedProperties = {};\n            vm.showConfig = false;\n            vm.showNavigator = true;\n            vm.showFullEditor = false;\n            var editor = null;\n            var thedocument = null;    \n            vm.timerId = null;\n            vm.showValidationMessage = false;\n            vm.validationMessage = null;\n            vm.currentKey = StorageFactory.getCurrentKey();\n            vm.iaf_url = StorageFactory.getGetter(\"IAF_URL\")();\n\n\n            vm.themes = StaticDataFactory.getThemes();\n            vm.selectedTheme = \"twilight\";\n            vm.selectedFontSize = 14;\n            vm.fontSizes = StaticDataFactory.getFontSizes();\n\n                        vm.availableLessons = [];\n\n            vm.toggleTab = toggleTab;\n            vm.thetabs=[\"tabauth\", \"tabedit\"];\n            toggleTab('tabauth');\n\n            function toggleTab(thetab)\n            {   \n                switch(thetab)\n                {\n                    case(\"tabauth\"):{vm.showeditor = false;vm.showauth = true;break;}\n                    case(\"tabedit\"):{vm.showeditor = true;vm.showauth = false;break;}\n                }\n\n                var elem = document.getElementById(thetab);\n                elem.classList.toggle('active1');\n                var theothers = _.without(vm.thetabs, thetab);\n                theothers.forEach(function(el)\n                {\n                    var ele =  document.getElementById(el);\n                    ele.classList.remove('active1');\n                });\n                void 0;\n\n            }\n\n            function setAvailableLesson(which)\n            {\n                ModeratorFactory.setAvailableLesson(which);\n            }\n\n            function saveInSlot()\n            {\n                vm.timerId = $interval(function()\n                {\n                    vm.showSpinnerSmall = true;\n                    $timeout(function()\n                    {\n                        vm.showSpinnerSmall = false;\n                    }, 1000);\n                    var thekey = StorageFactory.getGetter(StorageFactory.getCurrentKey().title)();\n                    StorageFactory.getSetter(thekey)(thedocument.getValue());\n                }, 5000);\n                StaticDataFactory.setTimerId(vm.timerId);\n            }\n\n            $scope.$on(\"Keychange\", function()\n            {\n                vm.currentKey = StorageFactory.getCurrentKey();\n                void 0;\n                retrieveData(vm.currentKey);\n                toggleReadonly(vm.currentKey);\n            });\n\n\n            $scope.$on('saveOldValues',function()\n            {\n                    vm.showSpinnerSmall = true;\n                    $timeout(function()\n                    {\n                        vm.showSpinnerSmall = false;\n                    }, 1000);\n                    var thekey = StorageFactory.getGetter(StorageFactory.getCurrentKey().title)();\n                    void 0;\n                    StorageFactory.getSetter(thekey)(thedocument.getValue());\n            });\n\n            function cropFilter(item)\n            {\n                if(item === undefined) return \"\";\n                var helper = item.substring(item.lastIndexOf('/') + 1 ,item.length);\n                if(helper.length > 0)\n                {\n                    return helper;\n                }\n                else\n                {\n                    return item;\n                }\n            }\n\n\n            function toggleSpinner()\n            {\n                vm.showSpinner = !vm.showSpinner;\n            }\n\n            function sendZip()\n            {   \n                toggleSpinner();\n                ZipService.sendZip().then(function succes(res)\n                {\n                    toggleSpinner();\n                    var el = document.getElementById('sendstatus');\n                    el.style.background = 'green';\n                    $timeout(function()\n                        {\n                            el.style.background = 'none';\n                        }, 5000);\n                    void 0;\n                },function failure(err)\n                {\n                    var el = document.getElementById('sendstatus');\n                    el.style.background = 'red';\n                    toggleSpinner();\n                   $timeout(function()\n                   {\n                            el.style.background = 'none';\n                        }, 5000);\n                    void 0;\n                });\n            }\n\n            function setCredentials()\n            {\n                void 0;\n                var resp = IafFactory.setCredentials(vm.iaf_url, vm.username, vm.password);\n            }\n\n            function postSnippet()\n            {\n                StaticDataFactory.postSnippet(vm.currentKey.title).then(function (res)\n                {\n                    void 0;\n                },\n                function (err)\n                {\n                    void 0;\n                });\n            }\n\n\n\n\n\n            function validateXml()\n            {\n                toggleSpinner();\n                ValidationFactory.validateXml(vm.currentKey.title).then\n                (\n                    function success(res)\n                    {\n                        vm.validationMessage = res;\n                        toggleSpinner();\n                        void 0;\n                    }, \n                    function failure(err)\n                    {\n                        toggleSpinner();\n                    }\n                );\n\n                            }\n\n            function changeFontSize()\n            {   \n                var ed = document.getElementsByClassName('CodeMirror')[0];\n                ed.style.fontSize = vm.selectedFontSize.toString() + 'px';\n            }\n\n            function getEditor(_editor)\n            {\n                editor = EditorFactory.editorLoaded(_editor);\n                thedocument = editor.getDoc();\n                StaticDataFactory.getJson().then(function success(response)\n                {\n                    vm.navigatorModel = JSON.parse(response.data.JSONMONSTER.MYMONSTER);\n                    void 0;\n                    Object.keys(vm.navigatorModel).forEach(function (item, index)\n                    {\n\n                                               if(vm.navigatorModel[item].type === 'lesson')\n                        {\n                            vm.availableLessons.push( vm.navigatorModel[item] );\n                        }\n                        if (vm.availableLessons.length > 0)\n                        {\n                            setAvailableLesson(vm.availableLessons[0].url);\n                        }\n                    });\n\n                    editor.setOption('hintOptions', {schemaInfo: vm.navigatorModel});\n                    editor.foldCode(CodeMirror.Pos(0,0));\n                    editor.foldCode(CodeMirror.Pos(thedocument.lineCount(),0));\n                    toggle_datasource('pipes');\n                    showNav(); \n                    showConf();\n                    showConf();\n\n                    var avalue = StorageFactory.initialise();\n                    retrieveData();\n                    saveInSlot();\n\n                    IafFactory.setIAFURL();\n\n                },function error(response)\n                {\n                    void 0;\n                });\n            }\n\n            function toggleReadonly(akey)\n            {\n                void 0;\n                setReadonly(akey.isLocked);\n            }\n\n            function setReadonly(val)\n            {\n                editor.setOption('readOnly', val);\n            }\n\n            function unlock(akey)\n            {\n                setReadonly(false);\n            }\n\n            function changeTheme()\n            {\n                editor.setOption('theme', vm.selectedTheme);\n            }\n\n            function modifyAlias(slotn, newname)\n            {\n                void 0;\n                StorageFactory.getSetter(slotn)(newname);\n            }\n\n\n                        function toggleSlot()\n            {\n                vm.showSpinnerSmall = true;\n                $timeout(function()\n                {\n                    vm.showSpinnerSmall = false;\n                }, 1000);\n\n\n\n\n\n                void 0;\n                var key = StorageFactory.switchKey();\n                void 0;\n                $scope.$broadcast('KeySwitch',key);\n                retrieveData(key);\n            }\n\n            function storeData()\n            {\n                var myalias = StorageFactory.getCurrentKey().title;\n                var myvalue = thedocument.getValue();\n                var mykey = StorageFactory.getGetter(myalias)();\n                void 0;\n                StorageFactory.getSetter(mykey)(myvalue);\n            }\n\n            function retrieveData(alias)\n            {\n                if(alias === undefined)\n                {\n                    alias = StorageFactory.getCurrentKey();\n                }\n                void 0;\n                if(StorageFactory.getGetter(alias.title)() === undefined)\n                {\n                    $timeout(function() \n                    {\n                        void 0;\n                        var thekey = StorageFactory.getGetter(alias.title)();\n                        thedocument.setValue(StorageFactory.getGetter(thekey)());\n                    }, 50);\n                }\n                else\n                {\n                    var thekey = StorageFactory.getGetter(alias.title)();\n                    thedocument.setValue(StorageFactory.getGetter(thekey)());\n                }\n                if(StaticDataFactory.getTimerId() === 0 )\n                {\n                    saveInSlot();\n                }\n            }\n\n            function showConf()\n            {\n                var navigator = document.getElementById('navigatorcontainer');\n\n                                 if(vm.showConfig)\n                {\n                  navigator.style.left = \"0%\";\n                }\n                else\n                {\n                  navigator.style.left = '-25%';\n                }\n                vm.showConfig = !vm.showConfig;\n            }\n\n\n              function showNav()\n              {\n                var editor = document.getElementById('editorcontainer');\n                var navItem = document.getElementById('navItem');\n                var picture = document.getElementById('picture');\n                var iplogo = document.getElementById('iplogo');\n\n                                if(!picture || !navItem || !editor){return;}\n\n\n                if(vm.showNavigator)\n                {\n                  editor.style.width = '75%';\n                  editor.style.left = '25%';\n                  iplogo.style.top = '10px';\n                  navItem.style.left = '89%';\n                  picture.classList.add('fa-toggle-left');\n                  picture.classList.remove('fa-toggle-right');\n                }\n                else\n                {\n                  editor.style.width = '100%';\n                  editor.style.left = '0%';\n                  navItem.style.left = '0%';\n                  iplogo.style.top = '10px';\n                  picture.classList.remove('fa-toggle-left');\n                  picture.classList.add('fa-toggle-right');\n                }\n                vm.showNavigator = !vm.showNavigator;\n              }\n\n\n\n\n            function setSelectedClass(item)\n            {\n                vm.selectedItem = item;\n                StaticDataFactory.setSelectedItem(item);\n                vm.selectedProperties = {};\n\n                for(var i=0 ; i<item.properties.length; i++)\n                {\n                    if(item.properties[i][0]=='classname' || item.properties[i][0]=='className')\n                    {\n                        var checkbox = document.getElementById('checkbox' + i);\n                        if(checkbox === null)\n                        {\n                            break;\n                        }\n                        checkbox.click();\n                        break;\n                    }\n                }\n\n            }\n\n\n\n            function toggle_datasource(thetype)\n            {\n                StaticDataFactory.setDataSource(thetype);\n                vm.datasource = StaticDataFactory.getDataSource();\n                vm.showPropertyDescription = false;\n\n                                var done = false;\n                var parking = \"zzz\";\n                Object.keys(vm.navigatorModel).forEach(function(key)\n                {\n                    if (!done && vm.navigatorModel[key].type === thetype )\n                    {\n                        if (key < parking)\n                        {\n                            parking = key;\n                        }\n                    }\n                });\n                setSelectedClass(vm.navigatorModel[parking]);\n\n\n            }\n\n            function clearEditor()\n            {\n                if(editor.getOption('readOnly') === true)\n                {\n                    return;\n                }\n                thedocument.setValue(\"<?xml version='1.0' encoding='UTF-8'?>\\n\");\n                thedocument.setCursor({line:thedocument.lastLine(),ch:0});\n                editor.focus();\n            }\n\n            function styleEditorContent()\n            {\n                var pos = thedocument.getCursor();\n                var before = thedocument.getRange({line:pos.line,ch:0},pos);\n                var beforesegment = before.match(/<[\\w\\/\\s=\\'\\\"]+$|<[\\w\\/\\s=\\'\\\"]+>[\\w\\s]*$/);\n                if (beforesegment !== null)\n                {\n                    before = beforesegment[0];\n                }\n                var after = thedocument.getRange(pos,{line:pos.line,ch:null});\n                var aftersegment = after.match(/^[\\w\\/\\s=\\'\\\"]+>|^<[\\w\\/\\s=\\'\\\"]+>/);\n                if (aftersegment !== null)\n                {\n                    after = aftersegment[0];\n                }\n\n                var cursor = editor.getSearchCursor(before);\n                var counter =0 ;\n                var original = {line:10000,ch:10000};\n                var myindex = -1;\n                while (cursor.find() === true)\n                {   \n                    var newval = cursor.to();\n                    if (isTheBetter(pos, newval, original))\n                    {\n                        original = newval;\n                        myindex = counter;\n                    }\n                    counter++;\n                }\n                var settings = StaticDataFactory.getFormattingSettings();\n                thedocument.setValue(html_beautify(thedocument.getValue(),settings));\n\n                cursor = editor.getSearchCursor(before);\n                for(var i=0 ; i < myindex+1 ;i++)\n                {\n                    cursor.find();\n                }\n                if(cursor.to())\n                {\n                    thedocument.setCursor(cursor.to());\n                }\n                editor.focus();\n\n\n                function isTheBetter(newpos, oldpos, standard)\n                {\n                    var linedifference1 = Math.abs(standard.line - oldpos.line);\n                    var linedifference2 = Math.abs(standard.line - newpos.line);\n                    if (linedifference1 > linedifference2)\n                    {\n                        return false;\n                    }\n                    if(linedifference2 > linedifference1)\n                    {\n                        return true;\n                    }\n                    var chardifference1 = Math.abs(standard.ch - oldpos.ch);\n                    var chardifference2 = Math.abs(standard.ch - newpos.ch);\n                    if (chardifference1 > chardifference2)\n                    {\n                        return false;\n                    }\n                    return true;\n                }\n            }\n\n\n            function checkDefaults(property)\n            {\n                if(property[0] === 'classname' || property[0] === 'className')\n                {\n                    vm.selectedProperties[property[0]] = new attributeObject('className', new Array(property[2]));\n                    return true;\n                }\n                return false;\n            }\n\n\n\n            function submitForm()\n\n            {\n\n                if (vm.selectedItem === null || editor.getOption('readOnly') === true)\n                {\n                    return;\n                }\n                if(vm.selectedItem.type === 'snippets')\n                {\n                    void 0;\n                    thedocument.replaceSelection(vm.selectedItem.xml);\n                }\n                else\n                {\n                    var theproperties = [];    \n                    void 0;\n                    if (Object.keys(vm.selectedProperties).length > 0 )\n                    {\n                        Object.keys(vm.selectedProperties).forEach(function(thekey)\n                        {\n\n                                                        theproperties.push(vm.selectedProperties[thekey]);\n                        }); \n                    }\n                   var newtag = new xmlTag(vm.selectedItem.classname, theproperties);\n                    thedocument.replaceSelection(newtag.toCompleteTag());\n                    editor.focus();\n                }\n            }\n        })\n.filter('datasourceFilter', function(StaticDataFactory)\n    {\n        return function(items)\n        {\n            var filtered = [];\n            angular.forEach(items, function(item)\n            {\n               if (item.type === StaticDataFactory.getDataSource())\n                {\n                    filtered.push(item);\n                }\n            });\n            filtered.sort(function(a,b)\n                {\n                    var x = a.classname.toLowerCase();\n                    var y = b.classname.toLowerCase();\n                    if (x < y) {return -1;}\n                    if (x > y) {return 1;}\n                    return 0;\n                });\n            return filtered;\n        };\n    })\n\n\n    .filter('cleanupFilter', function()\n    {\n        return function(item)\n        {\n\n            if(item !== undefined)\n            {\n                var newstring = item.replace(/&lt;/g,'<');\n                var newerstring = newstring.replace(/&gt;/g,'>');\n                return newerstring;\n            }\n        };\n    });\n\n})();\n(function()\n{\n\t'use strict';\n\nangular.module('confab')\n\n.directive('nameGiver', function(StorageFactory)\n        {\n            return{\n                restrict:\"A\",\n                link : function(scope, el , attrs)\n                {\n                    el.bind('blur' , function(event)\n                    {\n                        var digit = event.target.id.match(/\\d+/g)[0];\n                        void 0;\n                        var element = document.getElementById('treeitem' + digit);\n                        var text = element.innerHTML;\n                        var thelist = scope.vm2.list;\n                        void 0;\n                        traverseArray(thelist);\n\n                        function traverseArray(sublist)\n                        {\n                            for(var i = 0 ; i<sublist.length; i++)\n                            {\n\n                                void 0;\n                                if(sublist[i].id == digit) \n                                {\n\n                                    var theobject = angular.element(element).scope();\n                                    void 0;\n                                    var siblings = theobject.$parentNodesScope.$modelValue;\n                                    for(var s = 0 ; s < siblings.length; s++)\n                                    {\n                                        if(siblings[s].title == text)\n                                        {\n                                            element.innerHTML = cropFilter(theobject.$modelValue.title);\n                                            void 0;\n                                            return;\n                                        }\n                                    }\n\n                                    sublist[i].title = text;\n                                    void 0;\n                                    if(!(sublist[i].isDirectory))\n                                    {\n                                        var theslot = StorageFactory.getGetter(scope.vm2.mySlots[digit].title)();\n                                        var oldalias = scope.vm2.mySlots[digit].title;\n                                        StorageFactory.changeKeys(oldalias,text);\n                                        StorageFactory.getSetter(oldalias)();\n                                        StorageFactory.getSetter(text)(theslot);\n                                        scope.vm2.mySlots[digit].title = text; \n                                        var myslots = StorageFactory.getGetter(\"myslots\")();\n                                        myslots[digit].title = text;\n                                        StorageFactory.getSetter(\"myslots\")(myslots);\n                                    }\n                                    element.setAttribute('contentEditable', false);\n                                    scope.$apply();\n                                    StorageFactory.getSetter(\"thejson\")(scope.vm2.list);\n                                    break;\n                                }\n                                if(sublist[i].nodes.length > 0)\n                                {\n                                    traverseArray(sublist[i].nodes);\n                                }\n                            }\n                        }\n\n                        function cropFilter(item)\n                        {\n                            if(item === undefined) return \"\";\n                            var helper = item.substring(item.lastIndexOf('/') + 1 ,item.length);\n                            if(helper.length > 0)\n                            {\n                                return helper;\n                            }\n                            else\n                            {\n                                return item;\n                            }\n                        }\n\n\n                    });\n                    el.bind(['keydown'],function(event)\n                    {\n                        var code = event.which || event.keyCode || eventt.charCode ;\n                        void 0;\n                        if (code === 13)\n                        {\n                            event.preventDefault();\n                            var element = document.getElementById('treeitem'+event.target.id.match(/\\d+/g));\n                            element.blur();\n                        } \n                    });\n                }\n            };\n        })\n\n.directive('propertyListener', function(attributeObject)\n{\n\n\t\treturn{\n\t\tlink : function(scope, elem, attrs)\n\t\t{\n\t\t\telem.bind('click', function(event)\n\t\t\t{\n\t\t\t\tvar heading = document.getElementById('propertyheader');\n\t\t\t\tvar text = document.getElementById('propertytext');\n\t\t\t\tvoid 0;\n\t\t\t\tvar itemnumber = event.target.id.match(/\\d+$/)[0];\n\t\t\t\tvar data = scope.vm.selectedItem.properties[itemnumber];\n\t\t\t\theading.innerHTML = data[0];\n\t\t\t\ttext.innerHTML = data[1];\n\n\t\t\t\tvar elemt = document.getElementById('checkbox' + itemnumber);\n\t\t\t\tvar input = document.getElementById('propertyvalue' + itemnumber);\n\t\t\t\tvar item = scope.vm.selectedItem;\n\n\t\t\t\tvoid 0;\n\n\n\t\t\t\t\t\t\t\tif(typeof (elemt) === 'object')\n\t\t\t\t\tswitch (elemt.checked)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase true :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvoid 0;\n\t\t\t\t\t\t\tscope.vm.selectedProperties[data[0]] = new attributeObject(data[0], new Array(input.value));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase false : \n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvoid 0;\n\t\t\t\t\t\t\tdelete scope.vm.selectedProperties[data[0]];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\tvoid 0;\n\n\t\t\t});\n\t\t}\n\n\t};\n})\n.directive(\"contenteditable\", function() {\n  return {\n    restrict: \"A\",\n    require: \"ngModel\",\n    link: function(scope, element, attrs, ngModel) {\n\n      function read() {\n        ngModel.$setViewValue(element.html());\n      }\n\n      ngModel.$render = function() {\n        element.html(ngModel.$viewValue || \"\");\n      };\n\n            element.bind(\"blur keyup change\", function(event) \n      {\n        void 0;\n        var el = event.target.id;\n        if(el !== 'newproperty' && el !== 'newclassname' && el !== 'newdescription')\n        {\n\t        var oldvalue = scope.vm.selectedItem.properties[scope.vm.selectedProperty][0];\n\t        scope.$apply(read);\n\t        var newvalue = scope.vm.selectedItem.properties[scope.vm.selectedProperty][0];\n\t        var theattrs = scope.vm.selectedItem.attrs;\n\t        if(newvalue !== oldvalue)\n\t        {\n\t        \tObject.defineProperty(theattrs, newvalue,\n\t        \t\tObject.getOwnPropertyDescriptor(theattrs, oldvalue));\n\t        \tdelete theattrs[oldvalue];\n\t        }\n        }\n        else\n        {\n        \tscope.$apply(read);\n        }\n\n      });\n    }\n  };\n});\n\n\n}());\n(function()\n{\n\t'use strict';\n\tvar app = angular.module('confab');\n\n\tapp.controller('ModeratorController', function($scope, StaticDataFactory, $uibModal, StorageFactory, ModeratorFactory)\n\t{\n\n\t\tvar vm = this;\n\t\tvm.showModel = showModel;\n\t\tvm.deleteProperty = deleteProperty;\n\t\tvm.changeAttr = changeAttr;\n\t\tvm.addProperty = addProperty;\n\t\tvm.addNewClass = addNewClass;\n\t\tvm.otherSlot = otherSlot;\n\t\tvm.postTag = postTag;\n\t\tvm.checkForXml = checkForXml;\n\t\tvm.postJsonBulk = postJsonBulk;\n\t\tvm.confirmDelete = confirmDelete;\n\n\t\t\t\tvoid 0;\n\t\tStaticDataFactory.stopTimer();\n\n\n\t\t\t\t$scope.$on('$viewContentLoaded', function()\n\t\t{\n\n\t\t\t  \t\t});\n\n\t\tvm.dataModel = StaticDataFactory.getStaticJson();\n\t\tvm.currentSlotNumber = StorageFactory.getCurrentKey().title;\n\t\tvoid 0;\n\t\tvm.showPropertyDescription= false;\n\t\tvm.selectedProperty = 0;\n\t\tvm.addingProperty = false;\n\t\tvm.newProperty = null;\n\t\tvm.addingItem = false;\n\n\n\n\t\t\t\t\t\tif (vm.dataModel === null)\n\t\t{\n\t\t\tStaticDataFactory.getJson().then(function success(response)\n\t\t\t{\n\t\t\t\tvm.dataModel = response.data;\n\t\t\t\tvm.selectedItem = vm.dataModel[(Object.keys(vm.dataModel)[0])];\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvm.selectedItem = StaticDataFactory.getSelectedItem();\n\t\t}\n\n\n\t\tfunction postJsonBulk()\n\t\t{\n\t\t\tModeratorFactory.postJsonBulk(vm.selectedItem.description);\n\t\t}\n\n\t\tfunction checkForXml()\n\t\t{\n\t\t\tvoid 0;\n\t\t\tStaticDataFactory.loadXml(vm.selectedItem.classname).then(function success(res)\n\t\t\t{\n\t\t\t\tvm.selectedItem.xml = res.data;\n\t\t\t});\n\t\t}\n\n\t\tfunction deleteItem()\n\t\t{\n\t\t\tModeratorFactory.deleteItem(vm.selectedItem.classname).then(function succcess(res)\n\t\t\t\t{\n\t\t\t\t\tvoid 0;\n\t\t\t\t\tvar parking = vm.selectedItem.classname;\n\t\t\t\t\tdelete vm.dataModel[parking];\n\t\t\t\t\tvm.selectedItem = vm.dataModel[Object.keys(vm.dataModel)[0]];\n\t\t\t\t},\n\t\t\t\tfunction fail(err)\n\t\t\t\t{\n\t\t\t\t\tvoid 0;\n\t\t\t\t});\n\t\t}\n\n\t\tfunction postTag()\n\t\t{\n\t\t\tvoid 0;\n\t\t\ttoggleSpinner();\n\t\t\tModeratorFactory.postTag(vm.selectedItem).then(function success(res)\n\t\t\t{\n\t\t\t\ttoggleSpinner();\n\t\t\t\tvoid 0;\n\t\t\t}, \n\t\t\tfunction fail(err)\n\t\t\t{\n\t\t\t\ttoggleSpinner();\n\t\t\t\tvoid 0;\n\t\t\t});\n\t\t}\n\n\t\tfunction addNewClass()\n\t\t{\n\t\t\tvm.newProperty = null;\n\t\t\tvm.addingProperty = false;\n\t\t\tvm.addingItem = true;\n\t\t\tvm.dataModel['NEWITEM'] = {classname:\"NEWITEM\",description:\"enter your description here\", type:\"general\",xml:\"\", attrs:{},properties:[]};\n\t\t\tvm.selectedItem = vm.dataModel['NEWITEM'];\n\t\t}\n\n\t\tfunction otherSlot()\n\t\t{\n\t\t\tvm.currentSlotNumber = StorageFactory.switchKey().title;\n\t\t\tvoid 0;\n\n\t\t\t\t\t\tvar myslot = StorageFactory.getGetter(vm.currentSlotNumber)();\n\n\t\t\tvm.selectedItem.xml = StorageFactory.getGetter(myslot)();\n\t\t}\n\n\t\tfunction changeAttr(index)\n\t\t{\n\t\t\tvm.selectedItem.attrs[vm.selectedItem.properties[index][0]] = new Array(vm.selectedItem.properties[index][2]);\n\t\t}\n\n\t\tfunction addProperty(string)\n\t\t{\n\t\t\tswitch(string)\n\t\t\t{\n\t\t\t\tcase 'add':\n\t\t\t\t{\n\t\t\t\t\tvm.newProperty = {propname:\"new_property\",propdes:\"replace with your description\",propdef:\"\"};\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'cancel':\n\t\t\t\t{\n\t\t\t\t\tvm.newProperty = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'confirm':\n\t\t\t\t{\n\t\t\t\t\tif(vm.newProperty.propname === \"\" || vm.newProperty.propdes === \"\")\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvm.selectedItem.attrs[vm.newProperty.propname] = new Array(vm.newProperty.propdef);\n\t\t\t\t\tvm.selectedItem.properties.unshift(new Array(vm.newProperty.propname,vm.newProperty.propdes,vm.newProperty.propdef));\n\t\t\t\t\tvm.newProperty = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction toggleSpinner()\n\t\t{\n\t\t\tvm.showSpinner = !vm.showSpinner;\n\t\t}\n\n\t\tfunction deleteProperty(index)\n\t\t{\n\t\t\tvoid 0;\n\t\t\tdelete vm.selectedItem.attrs[vm.selectedItem.properties[index][0]];\n\t\t\tvm.selectedItem.properties.splice(index,1);\n\t\t}\n\n\t\tfunction showModel()\n\t\t{\n\n\t\t\tvm.displayItem = JSON.stringify(vm.selectedItem,['properties'],4);\n\t\t\tvar modalInstance = $uibModal.open(\n\t\t\t{\n\t\t\t\ttemplateUrl : \"./views/mymodal.html\",\n\t\t\t\tcontroller : \"ModalController as vm\",\n\t\t\t\twindowClass : \"mymodal\",\n\t\t\t\tresolve : {items : function ()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn vm.selectedItem;\n\t\t\t\t\t}}\n\t\t\t});\n\t\t}\n\n\t\tfunction confirmDelete()\n\t\t{\n\n\t\t\tvar modalInstance = $uibModal.open(\n\t\t\t{\n\t\t\t\ttemplateUrl : \"./views/modal_delete_item.html\",\n\t\t\t\tanimation : true,\n\t\t\t\tcontroller : \"Modal2Controller as vm\",\n\t\t\t\tsize : \"sm\",\n\t\t\t\tbackdrop : \"static\",\n\t\t\t\tresolve : \n\t\t\t\t{\n\t\t\t\t\titem : function ()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn vm.selectedItem;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).result.then(function(result)\n\t\t\t{\n\t\t\t\tvoid 0;\n\t\t\t\tif(result === 'delete')\n\t\t\t\t{\n\t\t\t\t\ttoggleSpinner();\n\t\t\t\t\tModeratorFactory.deleteItem(vm.selectedItem.classname).then(function succcess(res)\n\t\t\t\t\t{\n\t\t\t\t\t\ttoggleSpinner();\n\t\t\t\t\t\tvoid 0;\n\t\t\t\t\t\tvar parking = vm.selectedItem.classname;\n\t\t\t\t\t\tdelete vm.dataModel[parking];\n\t\t\t\t\t\tvm.selectedItem = vm.dataModel[Object.keys(vm.dataModel)[0]];\n\t\t\t\t\t},\n\t\t\t\t\tfunction fail(err)\n\t\t\t\t\t{\n\t\t\t\t\t\ttoggleSpinner();\n\t\t\t\t\t\tvoid 0;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\n\n\n\t\t\t\t\t}\n\n\t})\n\n\t\t.controller('ModalController', function($uibModalInstance, items)\n\t{\n\t\tvar vm = this;\n\t\tvm.closeModal = closeModal;\n\t\tvm.items = JSON.stringify(items,null, 4);\n\n\t\tfunction closeModal()\n\t\t{\n\t\t\t$uibModalInstance.close();\n\n\t\t}\n\t})\n\n\t.controller('Modal2Controller', function($uibModalInstance, item)\n\t{\n\t\tvar vm = this;\n\t\tvm.closeModal = closeModal;\n\t\tvm.deleteItem = deleteItem;\n\t\tvm.item = item;\n\n\t\tfunction closeModal()\n\t\t{\n\t\t\t$uibModalInstance.close(\"cancel\");\n\t\t}\n\n\t\tfunction deleteItem()\n\t\t{\n\t\t\t$uibModalInstance.close(\"delete\");\n\t\t}\n\t})\n\n\t\t.controller('CourseInfoController', function(StaticDataFactory, ModeratorFactory)\n\t{\n\t\tvar vm = this;\n\t\tvoid 0;\n\t\tStaticDataFactory.stopTimer();\n\t\tvm.currentLesson = ModeratorFactory.getAvailableLessons();\n\n\t\tdocument.getElementById('Example2').src = vm.currentLesson;\n\n\n\n\t\t\t});\n\n}());\n(function()\n{\n\t'use strict';\n\n\tvar app = angular.module('confab');\n\n\tapp.factory('ModeratorFactory', function($http, StorageFactory, API_URL)\n\t{\n\tvar availableLesson = null;\t\n\t\treturn{\n\t\t\tpostJsonBulk : postJsonBulk,\n\t\t\tpostTag : postTag,\n\t\t\tpostSchema : postSchema,\n\t\t\tdeleteItem : deleteItem,\n\t\t\tsetAvailableLesson : setAvailableLesson,\n\t\t\tgetAvailableLessons : getAvailableLessons\n\t\t};\n\n\t\tfunction setAvailableLesson(which)\n\t\t{\n\t\t\tavailableLesson = which;\n\t\t\tvoid 0;\n\t\t}\n\n\n\t\tfunction getAvailableLessons()\n\t\t{\n\t\t\treturn availableLesson;\n\t\t}\n\n\n\n\t\tfunction postJsonBulk(json)\n\t\t{\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\t$http.post(API_URL + '/postJsonBulk', json).then(function success(resp)\n\t\t\t\t\t{\n\t\t\t\t\t\tvoid 0;\n\t\t\t\t\t},\n\t\t\t\t\tfunction failure(err)\n\t\t\t\t\t{\n\t\t\t\t\t\tvoid 0;\n\t\t\t\t\t});\n\t\t\t}\n\t\t\tcatch(err)\n\t\t\t{\n\t\t\t\tvoid 0;\n\t\t\t}\n\t\t}\n\n\n\t\tfunction postTag(theobject)\n        {\n          void 0;\n          \t  return  $http.post(API_URL+'/postIaftag', theobject).then(function success(resp)\n\t          {\n\t            void 0;\n\t          },\n\t          function failure(err)\n\t          {\n\t            void 0;\n\t          });\n        }\n\n\n                function convertXml(thexml)\n        {\n         \treturn $http({method:\"POST\",url: API_URL + '/convertToJson',data: thexml ,headers:{\"Content-Type\":'application/xml'} }).then(function(data)\n\t        {\n\t          return data;\n\t        },function(error)\n\t        {\n\t          void 0;\n\t        });\n        }\n\n\n\t\tfunction postSchema()\n\t\t{\n\n\t\t\t\t\t}\n\n\t\tfunction deleteItem(classname)\n\t\t{\n\t\t\treturn $http({method:\"GET\", url: API_URL + '/deleteItem?resource=' + classname  }).then(\n\t\t\t\tfunction success(res)\n\t\t\t\t{\n\t\t\t\t\treturn res;\n\t\t\t\t}, \n\t\t\t\tfunction failure(err)\n\t\t\t\t{\n\t\t\t\t\treturn err;\n\t\t\t\t});\n\t\t}\n\n\t});\n}());\n(function(){\n\n'use strict';\n    var app = angular.module('confab');\n    app.constant('PROJECTNAME','Ibis4Student');\n    app.constant('API_URL', \"http://localhost:3000\");\n    app.constant('DOWNLOAD_URL',\"http://ibis4education-env.bz46fawhzf.eu-central-1.elasticbeanstalk.com/iaf/api/configurations/download/Ibis4Student\");\n    app.constant('UPLOAD_URL',\"http://ibis4education-env.bz46fawhzf.eu-central-1.elasticbeanstalk.com/iaf/api/configurations\");\n    app.constant('IAF_URL', \"http://ibis4education-env.bz46fawhzf.eu-central-1.elasticbeanstalk.com\");\n\n\n\n    app.factory('StaticDataFactory', function(xmlTag, $http, StorageFactory,API_URL, IAF_URL, $interval) \n\n    {\n\n        var datasource = 'pipes';\n        var timerId = 0 ;\n        var themes = [\"twilight\", \"monokai\", \"neat\"];\n        var fontSizes = [12,13,14,15,16,17,18,19,20];\n        var thejson = null;\n        var selectedItem = null;\n\n        var formattingSettings = {\n                \"indent_size\": 4,\n                \"xml\": {\n                    \"end_with_newline\": true,\n                    \"js\": {\n                        \"indent_size\": 2\n                    },\n                    \"css\": {\n                        \"indent_size\": 2\n                    }\n                },\n                \"css\": {\n                    \"indent_size\": 1\n                },\n                \"js\": {\n                 \"preserve-newlines\": true\n                }\n                };\n\n        return{\n            getJson : getJson,\n            getStaticJson : getStaticJson,\n            loadXml : loadXml,\n            setDataSource: setDataSource,\n            getDataSource: getDataSource,\n            getFormattingSettings: getFormattingSettings,\n            getThemes: getThemes,\n            getFontSizes: getFontSizes,\n            setTimerId : setTimerId,\n            getTimerId : getTimerId,\n            stopTimer : stopTimer,\n            setSelectedItem : setSelectedItem,\n            getSelectedItem : getSelectedItem\n\n        };\n\n        function setSelectedItem(item)\n        {\n          selectedItem = item;\n        }\n\n         function getSelectedItem()\n        {\n          return selectedItem;\n        }\n\n        function setTimerId(timerid)\n        {\n          timerId = timerid;\n        }\n\n        function getTimerId(timerid)\n        {\n          return timerId;\n        }\n\n\n        function stopTimer()\n        {\n          $interval.cancel(timerId);\n          timerId = 0 ; \n        }\n\n        function getThemes()\n        {\n          return themes;\n        }\n\n        function getFontSizes()\n        {\n          return fontSizes;\n        }\n\n        function getFormattingSettings()\n        {\n          return formattingSettings;\n        }\n\n\n        function setDataSource(string)\n        {\n          datasource = string;\n        }\n\n        function getDataSource()\n        {\n          return datasource;\n        }\n\n\n        function getJson()\n        {          \n\n\n\n          return $http.get(IAF_URL + '/api/getjson').then(\n\n            function success(data)\n            {\n                void 0;\n                thejson = data.data.JSONMONSTER.MYMONSTER;\n                return data;\n            },\n            function fail(err)\n            {\n              void 0;\n            });\n\n        }  \n\n        function getStaticJson()\n        {\n          return thejson;\n        }\n\n\n\n                function loadXml(which)\n        {\n          void 0;\n          return $http.get(API_URL + '/snippets?resource=' + which ).then(function(data)\n            {\n              return data;\n            },function(error)\n            {\n              void 0;\n            });\n        }\n\n    });\n\n     app.factory('ZipService', function (StorageFactory, $http ,DOWNLOAD_URL, UPLOAD_URL, PROJECTNAME)\n     {\n        var myslots;\n        return {\n            init : init,\n            getSlots : getSlots,\n            getZip : getZip,\n            getZipFromFile : getZipFromFile,\n            sendZip : sendZip,\n            getMySlots : getMySlots\n        };\n\n\n        function init()\n        {\n            return StorageFactory.getGetter(\"thejson\")();\n        }\n\n        function getSlots()\n        {\n            return StorageFactory.getGetter(\"myslots\")();\n        } \n\n        function getMySlots()\n        {\n            return myslots;\n        } \n\n        function sendZip(saveas)\n        {\n                return new Promise(function(resolve, reject)\n                {\n                var zip = new JSZip();\n                var elements = document.querySelectorAll('[ui-tree-node]');\n\n\n                elements.forEach(function(item)\n                {\n                    var object = angular.element(item).scope();\n                    var parents = [];\n\n                    while(object.$parentNodeScope !== null)\n                    {\n                        parents.push(object.$parentNodeScope.$modelValue.title);\n                        object = object.$parentNodeScope;\n                    }\n\n                    var filename = \"\";\n                    while(parents.length > 0)\n                    {   \n                        filename += cropFilter(parents.pop()) + '/';\n                    }\n\n\n                    if(cropFilter(angular.element(item).scope().$modelValue.title) === 'Configuration.xml')\n                    {\n\n                                            filename = \"Ibis4Student/Configuration.xml\";\n                    }\n                    else\n                    {\n\n                                            filename =  filename + cropFilter(angular.element(item).scope().$modelValue.title) ;\n                    }\n\n                    if(angular.element(item).scope().$modelValue.isDirectory)\n                    {\n                        zip.folder(filename);\n                    }\n                    else\n                    {   \n                        var theslot = StorageFactory.getGetter(angular.element(item).scope().$modelValue.title)();\n                        zip.file(filename,StorageFactory.getGetter(theslot)());\n                    }\n                });\n                var timestamp = Date.now();\n                var text = \"configuration.version=\" + timestamp;\n                zip.file(\"BuildInfo_SC.properties\" , text);\n\n                void 0;\n\n\n                                              function cropFilter(item)\n                {\n                    if(item === undefined) return \"\";\n                    var helper = item.substring(item.lastIndexOf('/') + 1 ,item.length);\n                    if(helper.length > 0)\n                    {\n                        return helper;\n                    }\n                    else\n                    {\n                        return item;\n                    }\n                }\n\n                if(saveas)\n                {\n                  void 0;\n                  zip.generateAsync({type:\"blob\"}).then(function(myzip)\n                  {\n                    var blob = new Blob([myzip],{type:\"application/zip\"});\n                    void 0;\n                    saveAs(blob, \"configuration.zip\");\n                    resolve();\n                  });\n                }\n                else \n                {\n                  postConfig(zip, timestamp).then(function success(resp)\n                  {\n                    void 0;\n                    resolve(resp);\n                  },function failure(err)\n                  {\n                    void 0;\n                    reject(err);\n                  });\n                }\n                });\n        }\n\n\n        function postConfig(zip, timestamp)\n        {\n          return new Promise(function(resolve, reject)\n          {\n            if(UPLOAD_URL === undefined || typeof UPLOAD_URL !== 'string')\n            {\n              void 0;\n              return 'error';\n            }\n\n            var finalurl = UPLOAD_URL;\n            void 0;            zip.generateAsync({type:\"blob\"}).then(function(myzip)\n            {\n              var fileName = 'configuration.zip';\n              var fd = new FormData();\n\n\n                            fd.append(\"realm\", 'jdbc');\n              fd.append(\"name\", \"Ibis4Student\");\n              fd.append(\"version\", timestamp);\n              fd.append(\"encoding\", 'utf-8');\n              fd.append(\"multiple_configs\", false);\n              fd.append(\"activate_config\", true);\n              fd.append(\"automatic_reload\", true);\n              fd.append(\"file\", myzip, fileName);\n\n              void 0;\n              $http({method: 'POST',url:finalurl , data: fd , headers:{'Content-type': undefined}})\n              .then(function succes(response)\n              {\n                  void 0;\n                  resolve (response);\n              }, function failure(err)\n              {\n                  void 0;\n                  reject(err);\n              });\n\n              });\n\n            });\n\n        }\n\n\n        function getZipFromFile(file)\n        {\n          return JSZip.loadAsync(file).then(function(zip)\n            {\n              void 0;\n              StorageFactory.deleteAll();\n              var myzipfiles = [];\n\n              zip.forEach(function(relativePath, file)\n              {\n                if(file.name.substring(0,2) !== '__' && file.name !== PROJECTNAME +'/' && file.name !== 'BuildInfo_SC.properties')\n                {\n                  myzipfiles.push(file);\n                }\n              });\n\n              for(var i=0 ; i< myzipfiles.length; i++)\n              {\n                if(myzipfiles[i].name.indexOf(PROJECTNAME) > -1)\n                      {\n                        void 0;\n                        var item = myzipfiles[i].name;\n                        var helper = item.substring(item.lastIndexOf('/') + 1 ,item.length);\n                        myzipfiles[i].name = helper;\n                      }\n              }\n\n\n\n\n              storeZip(0);\n\n                            function storeZip(index)\n              {\n                if(index > myzipfiles.length-1)\n                {\n                  return;\n                }\n                else\n                {\n                  if(!(myzipfiles[index].dir))\n                  {\n                    myzipfiles[index].async(\"string\").then(function resolve(data)\n                    {\n                        var newslotname = \"slot\" + Math.ceil(Math.random()*1000);\n                        StorageFactory.getSetter(myzipfiles[index].name)(newslotname);\n                        StorageFactory.getSetter(newslotname)(data);\n                        index++;\n                        storeZip(index++);\n                    });\n                  }\n                  else\n                  {\n                    index++;\n                    storeZip(index);\n                  }\n                }\n              }                              \n\n              void 0;\n              var myjson=[];\n              myslots = {};\n\n              for(var i =0 ; i< myzipfiles.length ; i++)\n              {\n                if(myzipfiles[i].dir)\n                {\n                    myjson.push({\n                    id : Math.ceil(Math.random() * 10000),  \n                    isDirectory : myzipfiles[i].dir,\n                    title : myzipfiles[i].name.substring(0,myzipfiles[i].name.length-1),\n                    nodes : []\n                    });\n                }\n                else\n                {\n                  var myobj = {\n                    id : Math.ceil(Math.random() * 10000),\n                    isDirectory : myzipfiles[i].dir,\n                    title : myzipfiles[i].name,\n                    nodes : []\n                    };\n                  myjson.push(myobj);\n                  myslots[myobj.id] = {title:myobj.title, isLocked:false};\n                }\n              }\n\n              myjson.sort(function compare(val1, val2)\n              {\n                if(val1.title.split('/').length > val2.title.split('/').length)\n                {\n                  return -1;\n                }\n                if(val1.title.split('/').length < val2.title.split('/').length)\n                {\n                  return 1;\n                }\n                return 0;\n              });\n\n                var helper = 0;\n                var parentsfound = true; \n\n\n                while(parentsfound &&  helper <100)\n                {\n                  parentsfound = false;\n                  var copy = myjson;\n\n                  for(var index = 0 ; index < myjson.length; index ++)\n                  {\n                    for(var j=0 ; j< copy.length; j++)\n                    {\n                      if(isParent(myjson[index].title, copy[j].title))\n                      {\n                        myjson[index].nodes.push(copy[j]);\n                        myjson.splice(j,1);\n                        parentsfound = true;\n                        break;\n                      }\n                    }\n                    if(parentsfound)\n                    {\n                      break;\n                    }\n                  }\n                  helper ++;\n                }\n\n\n\n                function isParent(possibleparent, candidate)\n                {\n                  if(possibleparent === candidate)\n                  {\n                    return false;\n                  }\n                  var index = candidate.lastIndexOf('/');\n                  if(candidate.substring(0,index) === possibleparent)\n                  {\n                    return true;\n                  }\n                  else\n                  {\n                    return false;\n                  }\n                }\n\n                void 0;\n\n                StorageFactory.getSetter('thejson')(myjson);\n                StorageFactory.getSetter('myslots')(myslots);  \n                return(myjson); \n\n              });\n        }\n\n\n\n\n\n\n        function getZip()\n        {\n          void 0;\n\n          return $http({method:\"GET\", url:DOWNLOAD_URL, responseType:'arraybuffer'}).then(function success(resp)\n          {\n            void 0;\n            return new Promise(function (resolve, reject)\n            {\n            JSZip.loadAsync(resp.data).then(function(zip)\n            {\n              void 0;\n              StorageFactory.deleteAll();\n              var myzipfiles = [];\n\n              zip.forEach(function(relativePath, file)\n              {\n                if(file.name.substring(0,2) !== '__' && file.name !== PROJECTNAME +'/' && file.name !== 'BuildInfo_SC.properties')\n                {\n                  myzipfiles.push(file);\n                }\n              });\n\n              for(var i=0 ; i< myzipfiles.length; i++)\n              {\n                if(myzipfiles[i].name.indexOf(PROJECTNAME) > -1)\n                      {\n                        void 0;\n                        var item = myzipfiles[i].name;\n                        var helper = item.substring(item.lastIndexOf('/') + 1 ,item.length);\n                        myzipfiles[i].name = helper;\n                      }\n              }\n\n\n\n              storeZip(0);\n\n                            function storeZip(index)\n              {\n                if(index > myzipfiles.length-1)\n                {\n                  return;\n                }\n                else\n                {\n                  if(!(myzipfiles[index].dir))\n                  {\n                    myzipfiles[index].async(\"string\").then(function resolve(data)\n                    {\n                        var newslotname = \"slot\" + Math.ceil(Math.random()*1000);\n                        StorageFactory.getSetter(myzipfiles[index].name)(newslotname);\n                        StorageFactory.getSetter(newslotname)(data);\n                        index++;\n                        storeZip(index++);\n                    });\n                  }\n                  else\n                  {\n                    index++;\n                    storeZip(index);\n                  }\n                }\n              }                              \n\n              void 0;\n              var myjson=[];\n              myslots = {};\n\n              for(var i =0 ; i< myzipfiles.length ; i++)\n              {\n                if(myzipfiles[i].dir)\n                {\n                    myjson.push({\n                    id : Math.ceil(Math.random() * 10000),  \n                    isDirectory : myzipfiles[i].dir,\n                    title : myzipfiles[i].name.substring(0,myzipfiles[i].name.length-1),\n                    nodes : []\n                    });\n                }\n                else\n                {\n                  var myobj = {\n                    id : Math.ceil(Math.random() * 10000),\n                    isDirectory : myzipfiles[i].dir,\n                    title : myzipfiles[i].name,\n                    nodes : []\n                    };\n                  myjson.push(myobj);\n                  myslots[myobj.id] = {title:myobj.title, isLocked:false};\n                }\n              }\n\n              myjson.sort(function compare(val1, val2)\n              {\n                if(val1.title.split('/').length > val2.title.split('/').length)\n                {\n                  return -1;\n                }\n                if(val1.title.split('/').length < val2.title.split('/').length)\n                {\n                  return 1;\n                }\n                return 0;\n              });\n\n                var helper = 0;\n                var parentsfound = true; \n\n\n                while(parentsfound &&  helper <100)\n                {\n                  parentsfound = false;\n                  var copy = myjson;\n\n                  for(var index = 0 ; index < myjson.length; index ++)\n                  {\n                    for(var j=0 ; j< copy.length; j++)\n                    {\n                      if(isParent(myjson[index].title, copy[j].title))\n                      {\n                        myjson[index].nodes.push(copy[j]);\n                        myjson.splice(j,1);\n                        parentsfound = true;\n                        break;\n                      }\n                    }\n                    if(parentsfound)\n                    {\n                      break;\n                    }\n                  }\n                  helper ++;\n                }\n\n\n\n                function isParent(possibleparent, candidate)\n                {\n                  if(possibleparent === candidate)\n                  {\n                    return false;\n                  }\n                  var index = candidate.lastIndexOf('/');\n                  if(candidate.substring(0,index) === possibleparent)\n                  {\n                    return true;\n                  }\n                  else\n                  {\n                    return false;\n                  }\n                }\n\n                void 0;\n\n                StorageFactory.setCurrentKey(myslots[0]);\n                StorageFactory.getSetter('thejson')(myjson);\n                StorageFactory.getSetter('myslots')(myslots);  \n                resolve(myjson); \n\n              }, \n              function failure(err)\n              {\n                void 0;\n                reject(err);\n              });\n\n            });\n\n        },\n        function failure(err)\n        {\n          void 0;\n          return;\n        },function failure(err)\n        {\n          void 0;\n          return;\n        });\n\n      }\n\n     });\n\n\n\n\n    app.factory('StorageFactory',['storage', '$log', function(storage, $log)\n    {\n      var api = {};\n      var thekeys;\n      var thealiases = [\"file1\"];\n      var currentKey = \"slot1\";\n      var myaliases;\n\n            return {\n        getSetter : getSetter,\n        getGetter : getGetter,\n        verifyKey : verifyKey,\n        createAPIForKey : createAPIForKey,\n        createSetter : createSetter,\n        createGetter : createGetter,\n        getAliases : getAliases,\n        switchKey : switchKey,\n        setCurrentKey : setCurrentKey,\n        getCurrentKey : getCurrentKey,\n        getNewSlotname : getNewSlotname,\n        initialise : initialise,\n        deleteAll : deleteAll,\n        changeKeys : changeKeys\n      };\n\n      function changeKeys(oldname, newname)\n      {\n        void 0;\n        var index = -1;\n        var islocked = \"\";\n        for(var i= 0 ; i< thekeys.length ; i++)\n        {\n          if(thekeys[i].title === oldname)\n          {\n            index = i;\n            islocked = thekeys[i].isLocked;\n          }\n        }\n        if(index !== -1)\n        {\n          if(currentKey.title === oldname)\n          {\n            currentKey.title = newname;\n          }\n          thekeys[index].title = newname;\n        }\n        void 0;\n      }\n\n      function deleteAll()\n      {\n        var keys = storage.getKeys();\n        keys.forEach(function(key)\n        {\n          if(key !== 'IAF_URL')\n          {\n            getSetter(key)();\n          }\n        });\n      }\n\n      function switchKey()\n      {\n          var helper = thekeys.shift();\n          thekeys.push(helper);\n          currentKey = thekeys[0];\n          return thekeys[0];\n      }\n\n      function removeKey(itsAlias)\n      {\n        var index;\n        for(var i =0 ; i< thekeys.length; i++)\n        {\n          if(thekeys[i].title === itsAlias)\n          {\n              index = i;\n          }\n        }\n        thekeys.splice(index, 1);\n\n        if(currentKey.title === itsAlias)\n        {\n          currentKey = thekeys[0];\n        }\n      }\n\n\n\n\n      function getNewSlotname(createdAlias, theid)\n      {\n        void 0;\n        var newslotname = \"slot\" + Math.ceil(Math.random()*1000);\n        var theobject = { \"title\" : createdAlias, \"isLocked\" : false };\n        thekeys.push(theobject);\n        getSetter(newslotname)('<?xml version=\"1.0\" encoding=\"UTF-8\"?>');\n        getSetter(createdAlias)(newslotname);\n        var helper = getGetter(\"myslots\")();\n        helper[theid] = theobject;\n        getSetter(\"myslots\")(helper);\n        return newslotname;\n      }\n\n      function initialise()\n      {\n        if(storage.getKeys().length === 0)\n        {\n          getSetter(\"slot1\")(\" start here...\");\n          getSetter(\"file1\")(\"slot1\");\n          var thejson = [\n                          {\n                            \"id\": 1,\n                            \"title\": \"dir1\",\n                            \"isDirectory\": true,\n                            \"nodes\": [\n                              {\n                                \"id\": 2,\n                                \"title\": \"file1\",\n                                \"isDirectory\": false,\n                                \"isLocked\": false,\n                                \"nodes\": []\n                              }\n                            ]\n                          }\n                        ];\n          var myslots = { 2 : {\"title\":\"file1\",isLocked:false} };              \n          getSetter(\"thejson\")(thejson);\n          getSetter(\"myslots\")(myslots);\n          thekeys = createKeys([\"file1\"]);\n        }\n        else\n        {\n          var helper = storage.getKeys();\n\n          if(helper.indexOf(\"ngIdle.expiry\") > -1)\n          {\n              helper.splice(helper.indexOf(\"ngIdle.expiry\"),1);\n          }  \n\n          if(helper.indexOf(\"thejson\") > -1)\n          {\n              helper.splice(helper.indexOf(\"thejson\"),1);\n          }  \n          if(helper.indexOf(\"myslots\") > -1)\n          {\n              helper.splice(helper.indexOf(\"myslots\"),1);\n          } \n          if(helper.indexOf(\"IAF_URL\") > -1)\n          {\n              helper.splice(helper.indexOf(\"IAF_URL\"),1);\n          } \n\n          thekeys = createKeys(helper); \n        }\n        currentKey = thekeys[0];\n      }\n\n\n      function getAliases()\n      {\n        var output = [];\n\n        thealiases.forEach(function(value)\n        {\n          output.push(getGetter(value)());\n        });\n\n      return output;  \n      }\n\n\n      function setCurrentKey(key)\n      {\n       void 0; \n        currentKey = key;\n      }\n\n      function getCurrentKey()\n      {\n        return currentKey;\n      }      \n\n\n      function createKeys(helper)\n      {\n        var result = [];\n        helper.forEach(function(val)\n        {\n          if(val.substring(0,4) !== 'slot' )\n          {\n            result.push({\"title\" : val, \"isLocked\" : false});\n          }\n        });\n        return result;\n      }\n\n      function getSetter(key)\n      {\n        verifyKey(key);\n        return api[key].setter;\n      }\n      function getGetter(key)\n      {\n        verifyKey(key);\n        return api[key].getter;\n      }\n\n      function verifyKey(key)\n      {\n        if(!key || angular.isUndefined(key))\n        {\n          throw new Error(\"Key[ \" + key + \" ] is invalid\");\n        }\n\n        if(!api.hasOwnProperty(key))\n        {\n          createAPIForKey(key);\n        }\n\n\n      }\n\n      function createAPIForKey(key)\n      {\n        var setter = createSetter(key);\n        var getter = createGetter(key);\n        api[key] = \n        {\n          setter : setter,\n          getter : getter\n        };\n      }\n\n      function createSetter(key)\n      {\n        return function(value)\n        {\n          if(angular.isDefined(value))\n          {\n            try\n            {\n              storage.set(key, value);\n            }\n            catch(error)\n            {\n              $log.info('[StorageFactory]' + error.message);\n            }\n          }\n          else\n          {\n            storage.remove(key);\n          }\n        };\n      }\n\n      function createGetter(key)\n      {\n        return function()\n        {\n          var value = storage.get(key);\n          if(value === null)\n          {\n            value = undefined;\n            var setter = api[key].setter;\n            setter(value);\n          }\n          return value;\n        };\n      }\n    }]);\n    app.factory('EditorFactory', function()\n    {\n    var editor = null;  \n\n            return {\n        editorLoaded : editorLoaded\n      };\n\n      function editorLoaded(_editor)\n      {\n                var _doc = _editor.getDoc();\n                _editor.focus();\n                _editor.setOption('lineNumbers', true);\n                _editor.setOption('lineWrapping', true);\n                _editor.setOption('mode', 'xml');\n                _editor.setOption('beautify', 'true');\n                _editor.setOption('theme', 'twilight');\n                _editor.setOption('foldGutter', true);\n                _editor.setOption('gutters',[ \"CodeMirror-linenumbers\",\"CodeMirror-foldgutter\"]);\n                _editor.setOption('matchTags', {bothTags: true});\n                var extraKeys =  {\n                          \"'<'\": completeAfter,\n                          \"'/'\": completeIfAfterLt,\n                          \"' '\": completeIfInTag,\n                          \"'='\": completeIfInTag,\n                          \"Ctrl-Space\": \"autocomplete\"\n                                };\n                _editor.setOption('extraKeys', extraKeys);\n\n                void 0;\n\n                var windowheight = window.innerHeight;\n                var navbarheight = document.getElementById('mynavbar').offsetHeight;\n                var ed = document.querySelector('.CodeMirror');\n                ed.style.height = (windowheight - navbarheight) + 'px'; \n                void 0;\n\n                function completeAfter(cm, pred) \n                {\n                    var cur = cm.getCursor();\n                    if (!pred || pred()) setTimeout(function() \n                    {\n                        if (!cm.state.completionActive)\n                        cm.showHint({completeSingle: false});\n                    }, 100);\n                    return CodeMirror.Pass;\n                }\n\n                function completeIfAfterLt(cm) \n                {\n                    return completeAfter(cm, function() \n                    {\n                        var cur = cm.getCursor();\n                        return cm.getRange(CodeMirror.Pos(cur.line, cur.ch - 1), cur) == \"<\";\n                    });\n                }\n\n                function completeIfInTag(cm) \n                {\n                return completeAfter(cm, function() \n                {\n                    var tok = cm.getTokenAt(cm.getCursor());\n                    if (tok.type == \"string\" && (!/['\"]/.test(tok.string.charAt(tok.string.length - 1)) || tok.string.length == 1)) return false;\n                    var inner = CodeMirror.innerMode(cm.getMode(), tok.state).state;\n                    return inner.tagName;\n                });\n\n              }\n              return _editor;\n            }\n\n    });\n    app.factory('ValidationFactory', function(StorageFactory, $http, API_URL)\n    {\n      return {\n        validateXml : validateXml\n      };\n\n      function validateXml()\n      {\n\n          return $http.get(API_URL + '/validate').then(function succes(res)\n          {\n            var thexml = StorageFactory.getGetter(StorageFactory.getCurrentKey())();\n            void 0;\n            void 0;\n            var message = validateXML(thexml, res.data);\n            return message;\n          },\n          function fail(err)\n          {\n            void 0;\n            return err;\n          });  \n      }\n    });\n    app.factory('IafFactory', function($http, StorageFactory, UPLOAD_URL)\n    {\n\n          var uname = null;\n    var pw = null;\n      return{\n        postConfig : postConfig,\n        setCredentials : setCredentials,\n        setIAFURL : setIAFURL\n      };\n\n      function setIAFURL()\n      {\n        UPLOAD_URL = StorageFactory.getGetter('UPLOAD_URL')();\n      }\n\n      function postConfig(zip)\n      {\n        return new Promise(function(resolve, reject)\n        {\n          var finalurl = UPLOAD_URL;\n          void 0;\n        zip.generateAsync({type:\"blob\"}).then(function(myzip)\n        {\n          var fileName = 'configuration.zip';\n          var fd = new FormData();\n          fd.append(\"realm\", 'jdbc');\n          fd.append(\"name\", \"Ibis4Student\");\n          fd.append(\"version\", 1);\n          fd.append(\"encoding\", 'utf-8');\n          fd.append(\"multiple_configs\", false);\n          fd.append(\"activate_config\", true);\n          fd.append(\"automatic_reload\", true);\n          fd.append(\"file\", myzip, fileName);\n\n\n          return new Promise(function(resolve, reject)\n          {\n             void 0;\n              return $http({method: 'POST',url:finalurl , data: fd , headers:{'Content-type': undefined}}\n                  ).then(function succes(response)\n                  {\n                      void 0;\n                      resolve (response);\n                  }, function failure(response)\n                  {\n                      void 0;\n                      reject(response);\n                  });\n                });           \n          });\n        resolve();\n        });\n\n\n\n      }\n\n      function setCredentials(server, uname, pw)\n      {\n        void 0;\n\n               if (server)\n        {\n          UPLOAD_URL = server;\n          void 0;\n          StorageFactory.getSetter('UPLOAD_URL')(server);\n        }\n        uname = uname;\n        pw = pw;\n\n        return{\n          apiurl:server,\n          uname : uname,\n          pw : pw\n        };\n      }\n    });\n\n})();   \n(function ()\n{\n    'use strict';\n    angular.module('confab')\n        .controller('ApsTreeController', function ($scope,$uibModal, ZipService, StorageFactory,StaticDataFactory, IafFactory,$timeout)\n        {\n\n            void 0;\n            var vm2 = this;\n            vm2.remove = remove;\n            vm2.toggle = toggle;\n            vm2.setSelectedSlot = setSelectedSlot;\n            vm2.changeName = changeName;\n            vm2.newSubitem = newSubitem;\n            vm2.modifyAlias = modifyAlias;\n            vm2.getZip = getZip;\n            vm2.addFileOrFolder = addFileOrFolder;\n            vm2.saveToFile= saveToFile;\n            vm2.showZipDialog = showZipDialog;\n\n            vm2.treeOptions =\n            {\n\n                               };\n\n            init();\n\n            function showZipDialog()\n            {\n\n                var modalInstance = $uibModal.open(\n                {\n                    templateUrl : \"./views/loadzipdialog.html\",\n                    controller : \"LoadZipController as vm3\",\n                    size : \"md\",\n                    resolve : {items : function ()\n                        {\n                            return \"something\";\n                        }}\n                });\n\n\n                modalInstance.rendered.then(\n                function success(resp)\n                {\n                var zipfromfile = document.getElementById('zipfromfile');\n                void 0;\n                zipfromfile.addEventListener('change', function(event)\n                {\n                    void 0;\n                    modalInstance.close({returntype:\"viafile\"});\n                    StaticDataFactory.stopTimer();\n                    ZipService.getZipFromFile(event.target.files[0]).then(function success(resp)\n                    {\n                        void 0;\n                        vm2.list = resp;\n                        void 0;\n                        vm2.mySlots = ZipService.getMySlots();\n                        var keys = Object.keys(vm2.mySlots);\n                        StorageFactory.setCurrentKey(vm2.mySlots[keys[0]]);\n                        setSelectedSlot({id:keys[0]});\n\n\n                    },function failure(err)\n                    {\n                        void 0;\n                    });\n\n                });    \n                },function failure(err)\n                {\n\n                                    });\n\n\n\n\n                modalInstance.result.then(function success(resp)\n                {\n                    void 0;\n                    if(resp.returntype === 'viahttp')\n                    {\n                        vm2.list = resp.data;\n                        vm2.mySlots = ZipService.getMySlots();\n                        var keys = Object.keys(vm2.mySlots);\n                        setSelectedSlot({id:keys[0]}) ;\n                        void 0;\n                    }\n\n                    },function failure(err)\n                    {\n                        void 0;\n                    });\n            }\n\n\n            function saveToFile()\n            {\n                ZipService.sendZip(true).then(function success(resp)\n                {\n                    void 0;    \n                },\n                function failure(err)\n                {\n                    void 0;\n                });\n            }\n\n            function addFileOrFolder(item)\n            {\n                var thetype = (item === 'file'? false : true);\n\n\n               var newobject = {\n                            id: Math.floor(Math.random()*10000) ,\n                            title: item + createRandomSuffix(),\n                            isDirectory : thetype,\n                            isLocked : false,\n                            nodes: []\n                            };\n               vm2.list.push(newobject);\n               if(item === 'file')\n               {\n                   StorageFactory.getNewSlotname(newobject.title, newobject.id);\n                   vm2.mySlots[newobject.id] = {\"title\" : newobject.title,\"isLocked\": false};\n                   setSelectedSlot(newobject);\n               }\n            }\n\n\n\n\n            function init()\n            {\n                vm2.list = StorageFactory.getGetter(\"thejson\")();\n                vm2.mySlots = StorageFactory.getGetter(\"myslots\")();\n            }\n\n\n\n            function getZip()\n            {\n                void 0;\n                ZipService.getZip().then(function success(data)\n                {\n                    void 0;\n                    vm2.list = data;\n                    vm2.mySlots = ZipService.getMySlots();\n                    var keys = Object.keys(vm2.mySlots);\n                    setSelectedSlot({id:keys[0]}) ;\n                    void 0;\n                }, function fail(err)\n                {\n                    void 0;\n                });\n            }\n\n            $scope.$on('KeySwitch', function(event, key)\n            {\n                var thekeys = Object.keys(vm2.mySlots);\n                void 0;\n                for(var i=0 ;i < thekeys.length; i++)\n                {\n\n                    if(vm2.mySlots[thekeys[i]].title == key.title)\n                    {\n                        void 0;\n\n                        var helper = \n                        {\n                            id:thekeys[i],\n                            title:thekeys[i].title,\n                            isLocked:thekeys,\n                            nodes:[],\n                            isDirectory:false\n                        };\n\n                        setSelectedSlot(helper);\n                    }\n                }\n\n            });\n\n            $scope.$watch('vm2.selectedSlot', function()\n            {\n                void 0;\n            });\n\n            $scope.$watch('vm2.list', function()\n            {\n                void 0;\n                StorageFactory.getSetter(\"thejson\")(vm2.list);\n            }, true);\n\n            function modifyAlias(slotn, newname)\n            {\n                void 0;\n                StorageFactory.getSetter(slotn)(newname);\n            }\n\n\n\n            function setSelectedSlot(object)\n            {\n                    void 0;\n                if(object.hasOwnProperty('id'))\n                {\n                    $scope.$emit('saveOldValues');\n                    vm2.selectedSlot = object.id;\n                    StorageFactory.setCurrentKey(vm2.mySlots[vm2.selectedSlot]);\n                    $scope.$emit('Keychange');\n                }\n                else\n                {\n                    if(!(object.isDirectory))\n                    {\n                        $scope.$emit('saveOldValues');\n                        vm2.selectedSlot = object.$modelValue.id;\n                        StorageFactory.setCurrentKey(vm2.mySlots[vm2.selectedSlot]);\n                        $scope.$emit('Keychange');\n                    }\n                }    \n                void 0;\n            }\n\n\n            function changeName(item)\n            {\n                var element = document.getElementById('treeitem' + item.$modelValue.id);\n                element.setAttribute('contentEditable', true);\n                var textnode = element.firstChild;\n                var caret = textnode.length;\n                var range = document.createRange();\n                range.setStart(textnode, 0);\n                range.setEnd(textnode, caret);\n                var sel = window.getSelection();\n                sel.removeAllRanges();\n                sel.addRange(range);\n                void 0;\n                element.focus();\n            }\n\n\n            function remove(object)\n            {\n                var theid = object.$modelValue.id;\n                var parking = getRoot(object);\n                var nodetype = object.$modelValue.isDirectory;\n                var counter = 0;\n\n                if(nodetype)\n                {\n                    var currentLayer = object;\n\n                    while(currentLayer !== null && counter < 10)\n                    {\n                          if(lookForDirectory(currentLayer.$parentNodesScope.$modelValue, object.$modelValue.id))\n                            {\n                                void 0;\n                                var results = deleteContainingFiles(object);\n                                void 0;\n\n                                if(results.length < Object.keys(vm2.mySlots).length)\n                                {   \n                                    results.forEach(function(item)\n                                    {\n                                        deleteFromLocalStorage(item);\n                                        delete vm2.mySlots[item];\n                                    });\n                                    object.remove();\n                                }\n                                break;\n                            }\n                          else\n                          {\n                            currentLayer = currentLayer.$parentNodeScope;\n                            void 0;\n                          }    \n                          counter++;\n                    }\n                }\n                else\n                {\n                    if(traverseArray(parking.$parentNodesScope.$modelValue, false))\n                    {\n                        void 0;\n                        deleteFromLocalStorage(object.$modelValue.id);\n                        delete vm2.mySlots[object.$modelValue.id]; \n                        object.remove(); \n                    }\n                }\n\n                function deleteFromLocalStorage(itsid)\n                {\n                    var thealias = vm2.mySlots[itsid].title;\n                    var theslot = StorageFactory.getGetter(thealias)();\n                    void 0;\n                    StorageFactory.getSetter(thealias)();\n                    StorageFactory.getSetter(theslot)();\n                    var myslots = StorageFactory.getGetter(\"myslots\")();\n                    delete myslots[itsid];\n                    StorageFactory.getSetter(\"myslots\")(myslots);\n                }\n\n\n                function deleteContainingFiles(object)\n                {\n                    var results = [];\n                    void 0;\n                    var array = object.$childNodesScope.$modelValue;\n\n                    findResults(array);\n\n                    function findResults(sublist)\n                    {\n                        for(var i=0 ; i< sublist.length; i++)\n                        {\n                            if(!(sublist[i].isDirectory))\n                            {\n                                results.push(sublist[i].id);\n                            }\n                            else\n                            {\n                                if(sublist[i].nodes.length > 0)\n                                {\n                                    findResults(sublist[i].nodes);   \n                                }\n                            }\n                        }\n                    }\n                     return results;  \n                }\n\n                function getRoot(obj)\n                {\n                    var parking = obj;\n                    while(parking.$parentNodeScope !== null)\n                    {\n                        parking = parking.$parentNodeScope ;\n                    }\n                    void 0;\n                    return parking;\n                }\n\n                function traverseArray(sublist, ok)\n                {\n\n                                        if(ok){return ok;}\n                    for(var i = 0 ; i<sublist.length; i++)\n                    {\n                        void 0;\n                        if(!(sublist[i].isDirectory) && sublist[i] !== object.$modelValue) \n                        {\n                            void 0;\n                            ok = true;\n                            break;\n                        }\n                        else\n                        {\n                            if(sublist[i].nodes.length > 0)\n                            {\n                                ok = traverseArray(sublist[i].nodes, ok);\n                            }\n                        }\n                    }\n                    return ok;\n                } \n\n                function lookForDirectory(sublist, callerid)\n                {\n                    for (var i = 0 ; i < sublist.length ; i ++)\n                    {\n                        if(sublist[i].isDirectory && sublist[i].id !== callerid)\n                        {\n                            void 0;\n                            return true;\n                        }\n                    }\n                }                 \n\n\n                            }\n\n            function toggle(item)\n            {\n               item.toggle();\n            }\n\n            function newSubitem(item)\n            {\n                var theitem = item.$modelValue;\n                void 0;\n\n                if(theitem.isDirectory)\n                {\n                    theitem.nodes.push({\n                    id: Math.floor(Math.random()*10000) ,\n                    title: theitem.title ,\n                    isDirectory : true,\n                    nodes: []\n                    });\n                }\n                else\n                {\n                    var theid = Math.floor(Math.random()*10000);\n                    var thetitle = theitem.title + '-' + createRandomSuffix();\n                    var newobject = {\n                            id: theid ,\n                            title: thetitle,\n                            isDirectory : false,\n                            isLocked : false,\n                            nodes: []\n                            };\n\n\n                    if(item.$parentNodeScope !== null)\n                    {\n                        item.$parentNodeScope.$modelValue.nodes.push(newobject);\n                    }\n                    else\n                    {\n                        vm2.list.push(newobject);\n                    }\n                    StorageFactory.getNewSlotname(thetitle, theid);\n                    vm2.mySlots[theid] = {\"title\" : thetitle,\"isLocked\": false};\n                    setSelectedSlot(newobject);\n                }\n            }\n\n\n            function createRandomSuffix()\n            {\n                var suffixes = \"abcdefghijklmnopqrstuvwxyzABCDEFGHILJKLMNOPRSTUVWXYZ\";\n                var result = \"\";\n                for(var i=0 ; i<3; i++)\n                {\n                    var randomdigit = Math.floor(Math.random()*suffixes.length);\n                    var letter = suffixes.substring(randomdigit,randomdigit + 1);\n                    result += letter;\n                }\n                return result;\n            }\n\n\n        })\n\n        .controller('LoadZipController', function($uibModalInstance, ZipService, items)\n            {\n                var vm3 = this;\n                vm3.closeModal = closeModal;\n                vm3.getZipOverHttp = getZipOverHttp;\n\n                function getZipOverHttp()\n                {\n                    void 0;\n                    ZipService.getZip().then(function success(data)\n                    {\n                        void 0;\n                        $uibModalInstance.close({returntype:\"viahttp\",data:data});\n\n                                            }, function fail(err)\n                    {\n                        void 0;\n                    });\n                }                \n\n\n\n                                function closeModal()\n                {\n                    $uibModalInstance.close(\"dialog cancelled.\");\n                }\n            })\n\n\n\n        .filter('cropFilter', function()\n        {\n            return function(item)\n            {\n                if(item === undefined) return \"\";\n                var helper = item.substring(item.lastIndexOf('/') + 1 ,item.length);\n                if(helper.length > 0)\n                {\n                    return helper;\n                }\n                else\n                {\n                    return item;\n                }\n            };\n        });\n\n})();\n\n(function ()\n{\n\nangular.module('confab')\n\n    .factory('xmlTag', function() \n        {\n\n        var staticPipenames = [\"FixedQuerySender\", \"XmlWellFormedChecker\",\"XmlValidator\",\"XmlSwitch\",\"XmlIf\",\"WsdlXmlValidator\",\"RemoveFromSession\",\"PutSystemDateInSession\",\"PutInSession\",\"MailSender\",\"LogSender\",\"Json2XmlValidator\",\"JmsCommunicator\",\"PutParametersInSession\",\"IsolatedServiceExecutor\",\"IsolatedServiceCaller\",\"IfMultipart\",\"GetFromSession\",\"FixedResultSender\",\"FixedResult\",\"FilenameSwitch\",\"XmlParamSwitch\",\"EchoSender\"];\n\n\n        function xmlTag(elementname, proparray) \n        {\n            this.tagType = \"STARTTAG\";\n            this.elementName = elementname;\n            tagProperties = {};\n            proparray.forEach(function(prop)\n            {\n                tagProperties[prop.getAttributeName()] = prop.getAttributeValues();\n            }); \n            this.tagProperties = tagProperties; \n        }\n        xmlTag.prototype = \n        {\n            getTagType : function()\n            {\n                return this.tagType;\n            },\n            setTagType : function(astring)\n            {\n                switch (astring)\n                {\n                    case \"STARTTAG\":{this.tagType = \"STARTTAG\"; break;}\n                    case \"COMBITAG\":{this.tagType = \"COMBITAG\";break;}\n                    case \"ENDTAG\":{this.tagType = \"ENDTAG\";break;}\n                    default :{void 0;\n                                this.tagType = \"STARTTAG\";}\n                }\n            },\n            toCompleteTag : function()\n            {\n                var returnstring = \"\";  \n                var itsproperties = \"\"; \n                this.convertToPipe();\n\n                                angular.forEach(this.tagProperties, function(value, key)\n                {\n                    if (value == \"\")\n                    {\n                        itsproperties += \" \" + key + \"=\\\"\\\" \" + \" \";\n                    }\n                    else\n                    {\n                        itsproperties += \" \" + key + \"=\\\"\" + value + '\\\"';   \n                    }\n\n                });\n             returnstring =                     \"<\" + \n                                        this.elementName + \n                                        itsproperties + \n                                        \"></\" +\n                                        this.elementName + \n                                        \">\" ;\n\n\n                                                        return returnstring;                           \n\n\n            },\n            toObject : function()\n            {\n                var theobject = {} ;\n                theobject[this.elementName] = this.tagProperties;\n                void 0;\n                return theobject;\n            },\n            setProperty :function (key, value)\n            {\n                this.tagProperties[key] = value;\n            },\n            getPropertyValue :function (key)\n            {\n                return this.tagProperties[key];\n            },\n            convertToPipe: function()\n            {\n                if (this.elementName.search( /^.*Pipe$/ ) !== -1)\n                {\n                    this.elementName = \"pipe\"; \n                }\n\n                if(staticPipenames.includes(this.elementName))\n                {\n                    this.elementName = \"pipe\";    \n                }\n\n                var regex = \"/^.*Pipe$/\";\n                void 0;\n\n            }\n\n        };\n        return (xmlTag);\n        })\n\n    .factory('attributeObject', function()\n    {\n        function attributeObject(attributename, values, hasDefault)\n        {\n            this.name = attributename;\n\n                        if(values !== undefined)\n            {\n                this.values = values;\n            }\n            else\n            {\n                this.values = [];\n            }\n            if (hasDefault !== undefined)\n            {\n                this.hasDefault = hasDefault;\n            }\n            else \n            {\n                this.hasDefault = false;\n            }\n        }\n\n        attributeObject.prototype = \n        {\n            setAttributeValue : function(value)\n            {\n                if (this.hasDefault)\n                {\n                    this.values.unShift(value);\n                }\n                else \n                {\n                    this.values.push(value);\n                }\n            },\n\n            insertValues : function(array)\n            {\n               this.values = array; \n            },\n\n            getAttributeName : function()\n            {\n                return this.name;\n            },\n\n            getAttributeValues : function()\n            {\n                return this.values;\n            },\n\n                        setDefaultValue : function(bool)\n            {\n                this.hasDefault = bool ;\n            },\n\n            toString : function()\n            {\n                return this.name + 'Allowed values:' + this.values.join();\n            }\n        };\n\n\n        return(attributeObject);\n\n\n\n\n\n\n\n            });\n\n})();"],"sourceRoot":"/source/"}