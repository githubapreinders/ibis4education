{"version":3,"sources":["scripts.min.js"],"names":["app","angular","module","config","$stateProvider","$urlRouterProvider","state","url","views","content","templateUrl","controller","content@","otherwise","$scope","$interval","$timeout","$uibModal","xmlTag","attributeObject","StaticDataFactory","StorageFactory","EditorFactory","ValidationFactory","IafFactory","ZipService","ModeratorFactory","toggleTab","thetab","vm","showeditor","showauth","elem","document","getElementById","classList","toggle","theothers","_","without","thetabs","forEach","el","ele","remove","saveInSlot","getTimerId","timerId","showSpinnerSmall","thekey","getGetter","getCurrentKey","title","getSetter","thedocument","getValue","setTimerId","cancel","toggleSpinner","showSpinner","sendZip","then","res","style","background","err","setCredentials","iaf_url","username","password","resp","navigatorModel","JSON","parse","data","JSONMONSTER","MYMONSTER","toggle_datasource","showCredentialsDialog","modalInstance","open","size","resolve","items","result","validateXml","currentKey","validationMessage","changeFontSize","ed","getElementsByClassName","fontSize","selectedFontSize","toString","getEditor","_editor","editor","editorLoaded","getDoc","undefined","getJson","response","setOption","schemaInfo","foldCode","CodeMirror","Pos","lineCount","showNav","showConf","initialise","retrieveData","toggleReadonly","akey","setReadonly","isLocked","val","unlock","changeTheme","selectedTheme","modifyAlias","slotn","newname","toggleSlot","key","switchKey","$broadcast","storeData","myalias","myvalue","mykey","alias","setValue","navigator","showConfig","left","navItem","picture","iplogo","showNavigator","width","top","add","setSelectedClass","item","selectedItem","setSelectedItem","selectedProperties","i","properties","length","checkbox","click","thetype","setDataSource","datasource","getDataSource","showPropertyDescription","done","parking","Object","keys","type","clearEditor","getOption","setCursor","line","lastLine","ch","focus","styleEditorContent","isTheBetter","newpos","oldpos","standard","linedifference1","Math","abs","linedifference2","chardifference1","chardifference2","pos","getCursor","before","getRange","beforesegment","match","after","aftersegment","cursor","getSearchCursor","counter","original","myindex","find","newval","to","settings","getFormattingSettings","html_beautify","checkDefaults","property","Array","submitForm","replaceSelection","xml","theproperties","push","newtag","classname","toCompleteTag","this","codemirrorLoaded","message","userInput","showFullEditor","showValidationMessage","themes","getThemes","fontSizes","getFontSizes","availableLessons","$on","$uibModalInstance","submitCredentials","close","vm4","closeModal","dismiss","filter","filtered","sort","a","b","x","toLowerCase","y","newstring","replace","newerstring","directive","restrict","link","scope","attrs","bind","event","traverseArray","sublist","id","digit","theobject","element","siblings","$parentNodesScope","$modelValue","s","text","innerHTML","cropFilter","theslot","vm2","mySlots","oldalias","changeKeys","myslots","setAttribute","$apply","list","nodes","helper","substring","lastIndexOf","target","thelist","code","which","keyCode","eventt","charCode","preventDefault","blur","heading","itemnumber","elemt","input","checked","value","require","ngModel","read","$setViewValue","html","$render","$viewValue","oldvalue","vm3","selectedProperty","newvalue","theattrs","defineProperty","getOwnPropertyDescriptor","dataModel","postJsonBulk","description","checkForXml","loadXml","addNewClass","newProperty","addingProperty","addingItem","otherSlot","currentSlotNumber","myslot","changeAttr","index","addProperty","string","propname","propdes","propdef","unshift","deleteProperty","splice","showModel","windowClass","postDatamonster","confirmDelete","animation","backdrop","deleteItem","stopTimer","getStaticJson","getSelectedItem","vm5","stringify","vm6","factory","$http","setAvailableLesson","availableLesson","getAvailableLessons","json","post","API_URL","postSchema","datamonster","thetag","method","IAF_URL","headers","content-type","postTag","tag","constant","setIafUrl","timerid","formattingSettings","get","thejson","indent_size","end_with_newline","js","css","preserve-newlines","DOWNLOAD_URL","UPLOAD_URL","PROJECTNAME","init","getSlots","getMySlots","saveas","Promise","reject","zip","JSZip","elements","querySelectorAll","object","parents","$parentNodeScope","filename","pop","isDirectory","folder","file","timestamp","Date","now","generateAsync","myzip","blob","Blob","saveAs","postConfig","finalurl","fileName","fd","FormData","append","Content-type","getZipFromFile","loadAsync","storeZip","myzipfiles","async","newslotname","ceil","random","name","isParent","possibleparent","candidate","deleteAll","relativePath","indexOf","myjson","dir","myobj","val1","val2","split","parentsfound","copy","j","getZip","finalUrl","responseType","setCurrentKey","storage","$log","oldname","islocked","thekeys","getKeys","shift","getNewSlotname","createdAlias","theid","2","createKeys","getAliases","output","thealiases","verifyKey","api","setter","getter","isUndefined","Error","hasOwnProperty","createAPIForKey","createSetter","createGetter","isDefined","set","error","info","completeAfter","cm","pred","setTimeout","completionActive","showHint","completeSingle","Pass","completeIfAfterLt","cur","completeIfInTag","tok","getTokenAt","test","charAt","inner","innerMode","getMode","tagName","bothTags","extraKeys","'<'","'/'","' '","'='","Ctrl-Space","windowheight","window","innerHeight","navbarheight","offsetHeight","querySelector","height","server","uname","pw","showZipDialog","rendered","zipfromfile","addEventListener","returntype","files","setSelectedSlot","saveToFile","addFileOrFolder","newobject","floor","createRandomSuffix","$emit","selectedSlot","changeName","textnode","firstChild","caret","range","createRange","setStart","setEnd","sel","getSelection","removeAllRanges","addRange","deleteFromLocalStorage","itsid","thealias","deleteContainingFiles","findResults","results","array","$childNodesScope","getRoot","obj","ok","lookForDirectory","callerid","nodetype","currentLayer","newSubitem","theitem","thetitle","suffixes","randomdigit","letter","treeOptions","$watch","getZipOverHttp","elementname","proparray","tagType","elementName","tagProperties","prop","getAttributeName","getAttributeValues","staticPipenames","prototype","getTagType","setTagType","astring","returnstring","itsproperties","convertToPipe","toObject","setProperty","getPropertyValue","search","includes","attributename","values","hasDefault","setAttributeValue","unShift","insertValues","setDefaultValue","bool","join"],"mappings":"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","file":"scripts.min.js","sourcesContent":["(function()\n{\n    var app = angular.module('confab',['ngAnimate','ui.bootstrap','ui.tree', 'ui.router', 'ui.codemirror','ngCookies','angularLocalStorage']);\n\n\napp.config(function ($stateProvider, $urlRouterProvider)\n{\n    void 0;\n    $stateProvider\n\n        .state('app', {\n            url: '/',\n            views: {\n                'content': {\n                    templateUrl: 'views/home.html',\n                    controller: 'IndexController as vm'\n                }\n            }\n        })\n        .state('app.moderator', {\n            url:'moderator',\n            views: {\n                'content@': {\n                    templateUrl : 'views/moderator.html',\n                    controller  : 'ModeratorController as vm3'\n                }\n            }\n        });\n    $urlRouterProvider.otherwise('/');\n\n\n    });\n\n})();\n(function (){\n    'use strict';\n\n    angular.module('confab')\n        .controller('IndexController', function ($scope,$interval,$timeout, $uibModal, xmlTag, attributeObject, StaticDataFactory, StorageFactory, EditorFactory, ValidationFactory, IafFactory, ZipService,ModeratorFactory)\n        {\n\n            void 0;\n            var vm = this;\n\n            vm.submitForm = submitForm;\n            vm.codemirrorLoaded = getEditor;\n            vm.setSelectedClass = setSelectedClass;\n            vm.toggle_datasource = toggle_datasource;\n            vm.styleEditorContent = styleEditorContent;\n            vm.clearEditor = clearEditor;\n            vm.showNav = showNav;\n            vm.showConf = showConf;\n            vm.storeData = storeData;\n            vm.retrieveData = retrieveData;\n            vm.toggleSlot = toggleSlot;\n            vm.modifyAlias = modifyAlias;\n            vm.checkDefaults = checkDefaults;\n            vm.changeTheme = changeTheme;\n            vm.changeFontSize = changeFontSize;\n            vm.validateXml = validateXml;\n            vm.sendZip = sendZip;\n            vm.toggleSpinner = toggleSpinner;\n            vm.setCredentials = setCredentials;\n            vm.toggleReadonly = toggleReadonly;\n            vm.unlock = unlock;\n\n            vm.message = \"Angular Controller is working allright...\";\n            vm.userInput = \"\";\n            vm.datasource = StaticDataFactory.getDataSource();\n            vm.navigatorModel = null;\n            vm.selectedItem = null;\n            vm.showPropertyDescription = false;\n            vm.selectedProperties = {};\n            vm.showConfig = false;\n            vm.showNavigator = true;\n            vm.showFullEditor = false;\n            var editor = null;\n            var thedocument = null;    \n            vm.timerId = null;\n            vm.showValidationMessage = false;\n            vm.validationMessage = null;\n            vm.currentKey = StorageFactory.getCurrentKey();\n            vm.iaf_url = StorageFactory.getGetter(\"IAF_URL\")();\n\n\n            vm.themes = StaticDataFactory.getThemes();\n            vm.selectedTheme = \"twilight\";\n            vm.selectedFontSize = 14;\n            vm.fontSizes = StaticDataFactory.getFontSizes();\n\n                        vm.availableLessons = [];\n\n            vm.toggleTab = toggleTab;\n            vm.thetabs=[\"tabauth\", \"tabedit\"];\n            toggleTab('tabauth');\n\n            function toggleTab(thetab)\n            {   \n                switch(thetab)\n                {\n                    case(\"tabauth\"):{vm.showeditor = false;vm.showauth = true;break;}\n                    case(\"tabedit\"):{vm.showeditor = true;vm.showauth = false;break;}\n                }\n\n                var elem = document.getElementById(thetab);\n                elem.classList.toggle('active1');\n                var theothers = _.without(vm.thetabs, thetab);\n                theothers.forEach(function(el)\n                {\n                    var ele =  document.getElementById(el);\n                    ele.classList.remove('active1');\n                });\n                void 0;\n\n            }\n\n            function setAvailableLesson(which)\n            {\n                ModeratorFactory.setAvailableLesson(which);\n            }\n\n            function saveInSlot()\n            {\n                if (StaticDataFactory.getTimerId() !== 0 ) return;\n                void 0;\n                vm.timerId = $interval(function()\n                {\n                    vm.showSpinnerSmall = true;\n                    $timeout(function()\n                    {\n                        vm.showSpinnerSmall = false;\n                    }, 1000);\n                    var thekey = StorageFactory.getGetter(StorageFactory.getCurrentKey().title)();\n                    void 0;\n                    StorageFactory.getSetter(thekey)(thedocument.getValue());\n                }, 5000);\n                StaticDataFactory.setTimerId(vm.timerId);\n                $interval.cancel(vm.timerId);\n            }\n\n\n\n            $scope.$on('$destroy', function()\n            {\n                void 0;\n                $interval.cancel();\n            });\n\n            $scope.$on(\"Keychange\", function()\n            {\n                vm.currentKey = StorageFactory.getCurrentKey();\n                void 0;\n                retrieveData(vm.currentKey);\n                toggleReadonly(vm.currentKey);\n            });\n\n\n            $scope.$on('saveOldValues',function()\n            {\n                    vm.showSpinnerSmall = true;\n                    $timeout(function()\n                    {\n                        vm.showSpinnerSmall = false;\n                    }, 1000);\n                    var thekey = StorageFactory.getGetter(StorageFactory.getCurrentKey().title)();\n                    void 0;\n                    StorageFactory.getSetter(thekey)(thedocument.getValue());\n            });\n\n            function cropFilter(item)\n            {\n                if(item === undefined) return \"\";\n                var helper = item.substring(item.lastIndexOf('/') + 1 ,item.length);\n                if(helper.length > 0)\n                {\n                    return helper;\n                }\n                else\n                {\n                    return item;\n                }\n            }\n\n\n            function toggleSpinner()\n            {\n                vm.showSpinner = !vm.showSpinner;\n            }\n\n            function sendZip()\n            {   \n                toggleSpinner();\n                var thekey = StorageFactory.getGetter(StorageFactory.getCurrentKey().title)();\n                void 0;\n                StorageFactory.getSetter(thekey)(thedocument.getValue());\n                ZipService.sendZip().then(function succes(res)\n                {\n                    toggleSpinner();\n                    var el = document.getElementById('sendstatus');\n                    el.style.background = 'green';\n                    $timeout(function()\n                        {\n                            el.style.background = 'none';\n                        }, 5000);\n                    void 0;\n                },function failure(err)\n                {\n                    var el = document.getElementById('sendstatus');\n                    el.style.background = 'red';\n                    toggleSpinner();\n                   $timeout(function()\n                   {\n                            el.style.background = 'none';\n                        }, 5000);\n                    void 0;\n                });\n            }\n\n            function setCredentials()\n            {\n                void 0;\n                IafFactory.setCredentials(vm.iaf_url, vm.username, vm.password).then(\n                function succes(resp)\n                {\n                    void 0;    \n                    vm.navigatorModel = JSON.parse(resp.data.JSONMONSTER.MYMONSTER);\n                    toggle_datasource('pipes');\n                },\n                function fail(err)\n                {\n\n                });\n            }\n\n\n            function showCredentialsDialog()\n            {\n\n                var modalInstance = $uibModal.open(\n                {\n                    templateUrl : \"./views/modalcredentials.html\",\n                    controller : \"LoadCredentialsController as vm4\",\n                    size : \"md\",\n                    resolve : {items : function ()\n                        {\n                            return \"something\";\n                        }}\n                });\n\n                modalInstance.result.then(\n                function success(resp)\n                {\n                    void 0;\n                    vm.iaf_url = resp.iaf_url;\n                    vm.username = resp.username;\n                    vm.password = resp.password;\n                    setCredentials();\n\n\n                }\n                ,function failure(err)\n                {\n                    void 0;\n                });\n            }\n\n\n\n            function postSnippet()\n            {\n                StaticDataFactory.postSnippet(vm.currentKey.title).then(function (res)\n                {\n                    void 0;\n                },\n                function (err)\n                {\n                    void 0;\n                });\n            }\n\n\n\n\n\n            function validateXml()\n            {\n                toggleSpinner();\n                ValidationFactory.validateXml(vm.currentKey.title).then\n                (\n                    function success(res)\n                    {\n                        vm.validationMessage = res;\n                        toggleSpinner();\n                        void 0;\n                    }, \n                    function failure(err)\n                    {\n                        toggleSpinner();\n                    }\n                );\n\n                            }\n\n            function changeFontSize()\n            {   \n                var ed = document.getElementsByClassName('CodeMirror')[0];\n                ed.style.fontSize = vm.selectedFontSize.toString() + 'px';\n            }\n\n            function getEditor(_editor)\n            {\n                editor = EditorFactory.editorLoaded(_editor);\n                thedocument = editor.getDoc();\n                if(StorageFactory.getGetter('IAF_URL')() === null || StorageFactory.getGetter('IAF_URL')() === undefined)\n                {\n                    showCredentialsDialog();\n                }\n\n                else\n                {\n                    StaticDataFactory.getJson().then(\n                    function success(response)\n                    {\n                        vm.navigatorModel = JSON.parse(response.data.JSONMONSTER.MYMONSTER);\n                        void 0;\n                        editor.setOption('hintOptions', {schemaInfo: vm.navigatorModel});\n                        editor.foldCode(CodeMirror.Pos(0,0));\n                        editor.foldCode(CodeMirror.Pos(thedocument.lineCount(),0));\n                        toggle_datasource('pipes');\n                        showNav(); \n                        showConf();\n                        showConf();\n\n\n                        var avalue = StorageFactory.initialise();\n                        retrieveData();\n                        saveInSlot();\n\n                    },function error(response)\n                    {\n                        void 0;\n                    });\n                }\n\n                            }\n\n            function toggleReadonly(akey)\n            {\n                void 0;\n                setReadonly(akey.isLocked);\n            }\n\n            function setReadonly(val)\n            {\n                editor.setOption('readOnly', val);\n            }\n\n            function unlock(akey)\n            {\n                setReadonly(false);\n            }\n\n            function changeTheme()\n            {\n                editor.setOption('theme', vm.selectedTheme);\n            }\n\n            function modifyAlias(slotn, newname)\n            {\n                void 0;\n                StorageFactory.getSetter(slotn)(newname);\n            }\n\n\n                        function toggleSlot()\n            {\n                vm.showSpinnerSmall = true;\n                $timeout(function()\n                {\n                    vm.showSpinnerSmall = false;\n                }, 1000);\n\n\n\n\n\n                void 0;\n                var key = StorageFactory.switchKey();\n                void 0;\n                $scope.$broadcast('KeySwitch',key);\n                retrieveData(key);\n            }\n\n            function storeData()\n            {\n                var myalias = StorageFactory.getCurrentKey().title;\n                var myvalue = thedocument.getValue();\n                var mykey = StorageFactory.getGetter(myalias)();\n                void 0;\n                StorageFactory.getSetter(mykey)(myvalue);\n            }\n\n            function retrieveData(alias)\n            {\n                if(alias === undefined)\n                {\n                    alias = StorageFactory.getCurrentKey();\n                }\n                void 0;\n                if(StorageFactory.getGetter(alias.title)() === undefined)\n                {\n                    $timeout(function() \n                    {\n                        void 0;\n                        var thekey = StorageFactory.getGetter(alias.title)();\n                        thedocument.setValue(StorageFactory.getGetter(thekey)());\n                    }, 50);\n                }\n                else\n                {\n                    var thekey = StorageFactory.getGetter(alias.title)();\n                    thedocument.setValue(StorageFactory.getGetter(thekey)());\n                }\n                if(StaticDataFactory.getTimerId() === 0 )\n                {\n                    saveInSlot();\n                }\n            }\n\n            function showConf()\n            {\n                var navigator = document.getElementById('navigatorcontainer');\n\n                                 if(vm.showConfig)\n                {\n                  navigator.style.left = \"0%\";\n                }\n                else\n                {\n                  navigator.style.left = '-25%';\n                }\n                vm.showConfig = !vm.showConfig;\n            }\n\n\n              function showNav()\n              {\n                var editor = document.getElementById('editorcontainer');\n                var navItem = document.getElementById('navItem');\n                var picture = document.getElementById('picture');\n                var iplogo = document.getElementById('iplogo');\n\n                                if(!picture || !navItem || !editor){return;}\n\n\n                if(vm.showNavigator)\n                {\n                  editor.style.width = '75%';\n                  editor.style.left = '25%';\n                  iplogo.style.top = '10px';\n                  navItem.style.left = '89%';\n                  picture.classList.add('fa-toggle-left');\n                  picture.classList.remove('fa-toggle-right');\n                }\n                else\n                {\n                  editor.style.width = '100%';\n                  editor.style.left = '0%';\n                  navItem.style.left = '0%';\n                  iplogo.style.top = '10px';\n                  picture.classList.remove('fa-toggle-left');\n                  picture.classList.add('fa-toggle-right');\n                }\n                vm.showNavigator = !vm.showNavigator;\n              }\n\n\n\n\n            function setSelectedClass(item)\n            {\n                vm.selectedItem = item;\n                StaticDataFactory.setSelectedItem(item);\n                vm.selectedProperties = {};\n\n                for(var i=0 ; i<item.properties.length; i++)\n                {\n                    if(item.properties[i][0]=='classname' || item.properties[i][0]=='className')\n                    {\n                        var checkbox = document.getElementById('checkbox' + i);\n                        if(checkbox === null)\n                        {\n                            break;\n                        }\n                        checkbox.click();\n                        break;\n                    }\n                }\n\n            }\n\n\n\n            function toggle_datasource(thetype)\n            {\n                StaticDataFactory.setDataSource(thetype);\n                vm.datasource = StaticDataFactory.getDataSource();\n                vm.showPropertyDescription = false;\n\n                                var done = false;\n                var parking = \"zzz\";\n                Object.keys(vm.navigatorModel).forEach(function(key)\n                {\n                    if (!done && vm.navigatorModel[key].type === thetype )\n                    {\n                        if (key < parking)\n                        {\n                            parking = key;\n                        }\n                    }\n                });\n                setSelectedClass(vm.navigatorModel[parking]);\n\n\n            }\n\n            function clearEditor()\n            {\n                if(editor.getOption('readOnly') === true)\n                {\n                    return;\n                }\n                thedocument.setValue(\"<?xml version='1.0' encoding='UTF-8'?>\\n\");\n                thedocument.setCursor({line:thedocument.lastLine(),ch:0});\n                editor.focus();\n            }\n\n            function styleEditorContent()\n            {\n                var pos = thedocument.getCursor();\n                var before = thedocument.getRange({line:pos.line,ch:0},pos);\n                var beforesegment = before.match(/<[\\w\\/\\s=\\'\\\"]+$|<[\\w\\/\\s=\\'\\\"]+>[\\w\\s]*$/);\n                if (beforesegment !== null)\n                {\n                    before = beforesegment[0];\n                }\n                var after = thedocument.getRange(pos,{line:pos.line,ch:null});\n                var aftersegment = after.match(/^[\\w\\/\\s=\\'\\\"]+>|^<[\\w\\/\\s=\\'\\\"]+>/);\n                if (aftersegment !== null)\n                {\n                    after = aftersegment[0];\n                }\n\n                var cursor = editor.getSearchCursor(before);\n                var counter =0 ;\n                var original = {line:10000,ch:10000};\n                var myindex = -1;\n                while (cursor.find() === true)\n                {   \n                    var newval = cursor.to();\n                    if (isTheBetter(pos, newval, original))\n                    {\n                        original = newval;\n                        myindex = counter;\n                    }\n                    counter++;\n                }\n                var settings = StaticDataFactory.getFormattingSettings();\n                thedocument.setValue(html_beautify(thedocument.getValue(),settings));\n\n                cursor = editor.getSearchCursor(before);\n                for(var i=0 ; i < myindex+1 ;i++)\n                {\n                    cursor.find();\n                }\n                if(cursor.to())\n                {\n                    thedocument.setCursor(cursor.to());\n                }\n                editor.focus();\n\n\n                function isTheBetter(newpos, oldpos, standard)\n                {\n                    var linedifference1 = Math.abs(standard.line - oldpos.line);\n                    var linedifference2 = Math.abs(standard.line - newpos.line);\n                    if (linedifference1 > linedifference2)\n                    {\n                        return false;\n                    }\n                    if(linedifference2 > linedifference1)\n                    {\n                        return true;\n                    }\n                    var chardifference1 = Math.abs(standard.ch - oldpos.ch);\n                    var chardifference2 = Math.abs(standard.ch - newpos.ch);\n                    if (chardifference1 > chardifference2)\n                    {\n                        return false;\n                    }\n                    return true;\n                }\n            }\n\n\n            function checkDefaults(property)\n            {\n                if(property[0] === 'classname' || property[0] === 'className')\n                {\n                    vm.selectedProperties[property[0]] = new attributeObject('className', new Array(property[2]));\n                    return true;\n                }\n                return false;\n            }\n\n\n\n            function submitForm()\n\n            {\n\n                if (vm.selectedItem === null || editor.getOption('readOnly') === true)\n                {\n                    return;\n                }\n                if(vm.selectedItem.type === 'snippets')\n                {\n                    void 0;\n                    thedocument.replaceSelection(vm.selectedItem.xml);\n                }\n                else\n                {\n                    var theproperties = [];    \n                    void 0;\n                    if (Object.keys(vm.selectedProperties).length > 0 )\n                    {\n                        Object.keys(vm.selectedProperties).forEach(function(thekey)\n                        {\n\n                                                        theproperties.push(vm.selectedProperties[thekey]);\n                        }); \n                    }\n                   var newtag = new xmlTag(vm.selectedItem.classname, theproperties);\n                    thedocument.replaceSelection(newtag.toCompleteTag());\n                    editor.focus();\n                }\n            }\n        })\n\n    .controller('LoadCredentialsController', function($uibModalInstance, items)\n    {\n        void 0;\n        var vm4 = this;\n        vm4.iaf_url = null;\n        vm4.username = null;\n        vm4.password = null;\n        vm4.submitCredentials = submitCredentials;\n        vm4.closeModal = closeModal;\n\n        function submitCredentials()\n        {\n            void 0;\n            $uibModalInstance.close({iaf_url:vm4.iaf_url, username: vm4.username, password: vm4.password});\n        }\n\n        function closeModal()\n        {\n           $uibModalInstance.dismiss();\n        }\n    })\n\n\n    .filter('datasourceFilter', function(StaticDataFactory)\n    {\n        return function(items)\n        {\n            var filtered = [];\n            angular.forEach(items, function(item)\n            {\n               if (item.type === StaticDataFactory.getDataSource())\n                {\n                    filtered.push(item);\n                }\n            });\n            filtered.sort(function(a,b)\n                {\n                    var x = a.classname.toLowerCase();\n                    var y = b.classname.toLowerCase();\n                    if (x < y) {return -1;}\n                    if (x > y) {return 1;}\n                    return 0;\n                });\n            return filtered;\n        };\n    })\n\n\n    .filter('cleanupFilter', function()\n    {\n        return function(item)\n        {\n\n            if(item !== undefined)\n            {\n                var newstring = item.replace(/&lt;/g,'<');\n                var newerstring = newstring.replace(/&gt;/g,'>');\n                return newerstring;\n            }\n        };\n    });\n\n})();\n(function()\n{\n\t'use strict';\n\nangular.module('confab')\n\n.directive('nameGiver', function(StorageFactory)\n        {\n            return{\n                restrict:\"A\",\n                link : function(scope, el , attrs)\n                {\n                    el.bind('blur' , function(event)\n                    {\n                        var digit = event.target.id.match(/\\d+/g)[0];\n                        void 0;\n                        var element = document.getElementById('treeitem' + digit);\n                        var text = element.innerHTML;\n                        var thelist = scope.vm2.list;\n                        void 0;\n                        traverseArray(thelist);\n\n                        function traverseArray(sublist)\n                        {\n                            for(var i = 0 ; i<sublist.length; i++)\n                            {\n\n                                void 0;\n                                if(sublist[i].id == digit) \n                                {\n\n                                    var theobject = angular.element(element).scope();\n                                    void 0;\n                                    var siblings = theobject.$parentNodesScope.$modelValue;\n                                    for(var s = 0 ; s < siblings.length; s++)\n                                    {\n                                        if(siblings[s].title == text)\n                                        {\n                                            element.innerHTML = cropFilter(theobject.$modelValue.title);\n                                            void 0;\n                                            return;\n                                        }\n                                    }\n\n                                    sublist[i].title = text;\n                                    void 0;\n                                    if(!(sublist[i].isDirectory))\n                                    {\n                                        var theslot = StorageFactory.getGetter(scope.vm2.mySlots[digit].title)();\n                                        var oldalias = scope.vm2.mySlots[digit].title;\n                                        StorageFactory.changeKeys(oldalias,text);\n                                        StorageFactory.getSetter(oldalias)();\n                                        StorageFactory.getSetter(text)(theslot);\n                                        scope.vm2.mySlots[digit].title = text; \n                                        var myslots = StorageFactory.getGetter(\"myslots\")();\n                                        myslots[digit].title = text;\n                                        StorageFactory.getSetter(\"myslots\")(myslots);\n                                    }\n                                    element.setAttribute('contentEditable', false);\n                                    scope.$apply();\n                                    StorageFactory.getSetter(\"thejson\")(scope.vm2.list);\n                                    break;\n                                }\n                                if(sublist[i].nodes.length > 0)\n                                {\n                                    traverseArray(sublist[i].nodes);\n                                }\n                            }\n                        }\n\n                        function cropFilter(item)\n                        {\n                            if(item === undefined) return \"\";\n                            var helper = item.substring(item.lastIndexOf('/') + 1 ,item.length);\n                            if(helper.length > 0)\n                            {\n                                return helper;\n                            }\n                            else\n                            {\n                                return item;\n                            }\n                        }\n\n\n                    });\n                    el.bind(['keydown'],function(event)\n                    {\n                        var code = event.which || event.keyCode || eventt.charCode ;\n                        void 0;\n                        if (code === 13)\n                        {\n                            event.preventDefault();\n                            var element = document.getElementById('treeitem'+event.target.id.match(/\\d+/g));\n                            element.blur();\n                        } \n                    });\n                }\n            };\n        })\n\n.directive('propertyListener', function(attributeObject)\n{\n\n\t\treturn{\n\t\tlink : function(scope, elem, attrs)\n\t\t{\n\t\t\telem.bind('click', function(event)\n\t\t\t{\n\t\t\t\tvar heading = document.getElementById('propertyheader');\n\t\t\t\tvar text = document.getElementById('propertytext');\n\t\t\t\tvoid 0;\n\t\t\t\tvar itemnumber = event.target.id.match(/\\d+$/)[0];\n\t\t\t\tvar data = scope.vm.selectedItem.properties[itemnumber];\n\t\t\t\theading.innerHTML = data[0];\n\t\t\t\ttext.innerHTML = data[1];\n\n\t\t\t\tvar elemt = document.getElementById('checkbox' + itemnumber);\n\t\t\t\tvar input = document.getElementById('propertyvalue' + itemnumber);\n\t\t\t\tvar item = scope.vm.selectedItem;\n\n\t\t\t\tvoid 0;\n\n\n\t\t\t\t\t\t\t\tif(typeof (elemt) === 'object')\n\t\t\t\t\tswitch (elemt.checked)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase true :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvoid 0;\n\t\t\t\t\t\t\tscope.vm.selectedProperties[data[0]] = new attributeObject(data[0], new Array(input.value));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase false : \n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvoid 0;\n\t\t\t\t\t\t\tdelete scope.vm.selectedProperties[data[0]];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\tvoid 0;\n\n\t\t\t});\n\t\t}\n\n\t};\n})\n.directive(\"contenteditable\", function() {\n  return {\n    restrict: \"A\",\n    require: \"ngModel\",\n    link: function(scope, element, attrs, ngModel) {\n\n      function read() {\n        ngModel.$setViewValue(element.html());\n      }\n\n      ngModel.$render = function() {\n        element.html(ngModel.$viewValue || \"\");\n      };\n\n            element.bind(\"keyup change\", function(event) \n      {\n        void 0;\n        var el = event.target.id;\n        if(el !== 'newproperty' && el !== 'newclassname' && el !== 'newdescription')\n        {\n\t        var oldvalue = scope.vm3.selectedItem.properties[scope.vm3.selectedProperty][0];\n\t        scope.$apply(read);\n\t        var newvalue = scope.vm3.selectedItem.properties[scope.vm3.selectedProperty][0];\n\t        var theattrs = scope.vm3.selectedItem.attrs;\n\t        if(newvalue !== oldvalue)\n\t        {\n\t        \tObject.defineProperty(theattrs, newvalue,\n\t        \t\tObject.getOwnPropertyDescriptor(theattrs, oldvalue));\n\t        \tdelete theattrs[oldvalue];\n\t        }\n        }\n        else if(el !== 'newclassname'){\n        \tscope.$apply(read);\n        }\n      });\n      element.bind(\"blur\", function(event) \n      {\n        void 0;\n        var el = event.target.id;\n\n                if(el === 'newclassname') \n        {\n            var oldvalue = (scope.vm3.selectedItem.classname);\n            scope.$apply(read);\n            var newvalue = (scope.vm3.selectedItem.classname);\n            delete scope.vm3.dataModel[oldvalue];\n            scope.vm3.dataModel[newvalue] = scope.vm3.selectedItem;\n        }      \n        else{\n            scope.$apply(read);\n        }\n      });\n\n    }\n  };\n});\n\n\n\n}());\n(function()\n{\n\t'use strict';\n\tvar app = angular.module('confab');\n\tapp.controller('ModeratorController', function($scope, StaticDataFactory, $uibModal, StorageFactory, ModeratorFactory)\n\t{\n\t\tvar vm3 = this;\n\t\tvm3.showModel = showModel;\n\t\tvm3.deleteProperty = deleteProperty;\n\t\tvm3.changeAttr = changeAttr;\n\t\tvm3.addProperty = addProperty;\n\t\tvm3.addNewClass = addNewClass;\n\t\tvm3.otherSlot = otherSlot;\n\t\tvm3.postDatamonster = postDatamonster;\n\t\tvm3.checkForXml = checkForXml;\n\t\tvm3.postJsonBulk = postJsonBulk;\n\t\tvm3.confirmDelete = confirmDelete;\n\n\t\t\t\tvoid 0;\n\t\tStaticDataFactory.stopTimer();\n\n\t\t\t\tvm3.dataModel = JSON.parse(StaticDataFactory.getStaticJson());\n\t\tvoid 0;\n\t\tvm3.currentSlotNumber = StorageFactory.getCurrentKey().title;\n\t\tvm3.showPropertyDescription= false;\n\t\tvm3.selectedProperty = 0;\n\t\tvm3.addingProperty = false;\n\t\tvm3.newProperty = null;\n\t\tvm3.addingItem = false;\n\n\t\t\t\tif (vm3.dataModel === null)\n\t\t{\n\t\t\t\tvoid 0;\n\t\t\t\tStaticDataFactory.getJson().then(function success(data)\n\t\t\t\t{\n\t\t\t\t\t\tvm3.dataModel = JSON.parse(data.data.JSONMONSTER.MYMONSTER);\n\t\t\t\t\t\tvm3.selectedItem = vm3.dataModel[(Object.keys(vm3.dataModel)[0])];\n\t\t\t\t\t\tvoid 0;\n\t\t\t\t},\n\t\t\t\tfunction error(err)\n\t\t\t\t{\n\t\t\t\t\tvoid 0;\n\t\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvm3.selectedItem = StaticDataFactory.getSelectedItem();\n\t\t\tvoid 0;\n\t\t}\n\n\n\t\tfunction postJsonBulk()\n\t\t{\n\t\t\tModeratorFactory.postJsonBulk(vm3.selectedItem.description);\n\t\t}\n\n\t\tfunction checkForXml()\n\t\t{\n\t\t\tvoid 0;\n\t\t\tStaticDataFactory.loadXml(vm3.selectedItem.classname).then(function success(res)\n\t\t\t{\n\t\t\t\tvm3.selectedItem.xml = res.data;\n\t\t\t});\n\t\t}\n\n\t\tfunction deleteItem()\n\t\t{\n\t\t\tModeratorFactory.deleteItem(vm3.selectedItem.classname).then(function succcess(res)\n\t\t\t\t{\n\t\t\t\t\tvoid 0;\n\t\t\t\t\tvar parking = vm3.selectedItem.classname;\n\t\t\t\t\tdelete vm3.dataModel[parking];\n\t\t\t\t\tvm3.selectedItem = vm3.dataModel[Object.keys(vm3.dataModel)[0]];\n\t\t\t\t},\n\t\t\t\tfunction fail(err)\n\t\t\t\t{\n\t\t\t\t\tvoid 0;\n\t\t\t\t});\n\t\t}\n\n\t\tfunction postJsonMonster()\n\t\t{\n\t\t\tvoid 0;\n\t\t}\n\n\n\n\n\n\t\t\t\tfunction addNewClass()\n\t\t{\n\t\t\tvm3.newProperty = null;\n\t\t\tvm3.addingProperty = false;\n\t\t\tvm3.addingItem = true;\n\t\t\tvm3.dataModel['NEWITEM'] = {classname:\"NEWITEM\",description:\"enter your description here\", type:\"general\",xml:\"\", attrs:{},properties:[]};\n\t\t\tvm3.selectedItem = vm3.dataModel['NEWITEM'];\n\t\t}\n\n\t\tfunction otherSlot()\n\t\t{\n\t\t\tvm3.currentSlotNumber = StorageFactory.switchKey().title;\n\t\t\tvoid 0;\n\n\t\t\t\t\t\tvar myslot = StorageFactory.getGetter(vm3.currentSlotNumber)();\n\n\t\t\tvm3.selectedItem.xml = StorageFactory.getGetter(myslot)();\n\t\t}\n\n\t\tfunction changeAttr(index)\n\t\t{\n\t\t\tvm3.selectedItem.attrs[vm3.selectedItem.properties[index][0]] = new Array(vm3.selectedItem.properties[index][2]);\n\t\t}\n\n\t\tfunction addProperty(string)\n\t\t{\n\t\t\tswitch(string)\n\t\t\t{\n\t\t\t\tcase 'add':\n\t\t\t\t{\n\t\t\t\t\tvm3.newProperty = {propname:\"new_property\",propdes:\"replace with your description\",propdef:\"\"};\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'cancel':\n\t\t\t\t{\n\t\t\t\t\tvm3.newProperty = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'confirm':\n\t\t\t\t{\n\t\t\t\t\tif(vm3.newProperty.propname === \"\" || vm3.newProperty.propdes === \"\")\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvm3.selectedItem.attrs[vm3.newProperty.propname] = new Array(vm3.newProperty.propdef);\n\t\t\t\t\tvm3.selectedItem.properties.unshift(new Array(vm3.newProperty.propname,vm3.newProperty.propdes,vm3.newProperty.propdef));\n\t\t\t\t\tvm3.newProperty = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction toggleSpinner()\n\t\t{\n\t\t\tvm3.showSpinner = !vm3.showSpinner;\n\t\t}\n\n\t\tfunction deleteProperty(index)\n\t\t{\n\t\t\tvoid 0;\n\t\t\tdelete vm3.selectedItem.attrs[vm3.selectedItem.properties[index][0]];\n\t\t\tvm3.selectedItem.properties.splice(index,1);\n\t\t}\n\n\t\tfunction showModel()\n\t\t{\n\n\t\t\tvar modalInstance = $uibModal.open(\n\t\t\t{\n\t\t\t\ttemplateUrl : \"./views/itemcontents.html\",\n\t\t\t\tcontroller : \"ModalController as vm5\",\n\t\t\t\twindowClass : \"mymodal\",\n\t\t\t\tresolve : {items : function ()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn vm3.selectedItem;\n\t\t\t\t\t}}\n\t\t\t});\n\t\t}\n\n\t\tfunction postDatamonster()\n\t\t{\n\t\t\tvoid 0;\n\t\t\ttoggleSpinner();\n\t\t\tModeratorFactory.postDatamonster(vm3.dataModel).then(function success(res)\n\t\t\t{\n\t\t\t\ttoggleSpinner();\n\t\t\t\tvoid 0;\n\t\t\t}, \n\t\t\tfunction fail(err)\n\t\t\t{\n\t\t\t\ttoggleSpinner();\n\t\t\t\tvoid 0;\n\t\t\t});\n\t\t}\n\n\t\tfunction confirmDelete()\n\t\t{\n\n\t\t\tvar modalInstance = $uibModal.open(\n\t\t\t{\n\t\t\t\ttemplateUrl : \"./views/modal_delete_item.html\",\n\t\t\t\tanimation : true,\n\t\t\t\tcontroller : \"Modal2Controller as vm6\",\n\t\t\t\tsize : \"sm\",\n\t\t\t\tbackdrop : \"static\",\n\t\t\t\tresolve : \n\t\t\t\t{\n\t\t\t\t\titem : function ()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn vm3.selectedItem;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).result.then(function(result)\n\t\t\t{\n\t\t\t\tvoid 0;\n\t\t\t\tif(result === 'delete')\n\t\t\t\t{\n\t\t\t\t\ttoggleSpinner();\n\t\t\t\t\tModeratorFactory.deleteItem(vm3.selectedItem.classname).then(function succcess(res)\n\t\t\t\t\t{\n\t\t\t\t\t\ttoggleSpinner();\n\t\t\t\t\t\tvoid 0;\n\t\t\t\t\t\tvar parking = vm3.selectedItem.classname;\n\t\t\t\t\t\tdelete vm3.dataModel[parking];\n\t\t\t\t\t\tvm3.selectedItem = vm3.dataModel[Object.keys(vm3.dataModel)[0]];\n\t\t\t\t\t\tpostDatamonster();\n\t\t\t\t\t},\n\t\t\t\t\tfunction fail(err)\n\t\t\t\t\t{\n\t\t\t\t\t\ttoggleSpinner();\n\t\t\t\t\t\tvoid 0;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t})\n\n\t\t.controller('ModalController', function($uibModalInstance, items)\n\t{\n\t\tvar vm5 = this;\n\t\tvm5.closeModal = closeModal;\n\t\tvm5.items = JSON.stringify(items,null, 4);\n\n\t\tfunction closeModal()\n\t\t{\n\t\t\t$uibModalInstance.close();\n\n\t\t}\n\t})\n\n\t.controller('Modal2Controller', function($uibModalInstance, item)\n\t{\n\t\tvar vm6 = this;\n\t\tvm6.closeModal = closeModal;\n\t\tvm6.deleteItem = deleteItem;\n\t\tvm6.item = item;\n\n\t\tfunction closeModal()\n\t\t{\n\t\t\t$uibModalInstance.close(\"cancel\");\n\t\t}\n\n\t\tfunction deleteItem()\n\t\t{\n\t\t\t$uibModalInstance.close(\"delete\");\n\t\t}\n\t});\n}());\n(function()\n{\n\t'use strict';\n\n\tvar app = angular.module('confab');\n\n\tapp.factory('ModeratorFactory', function($http, StorageFactory)\n\t{\n\tvar IAF_URL = StorageFactory.getGetter('IAF_URL')();\t\n\tvar availableLesson = null;\t\n\t\treturn{\n\t\t\tpostJsonBulk : postJsonBulk,\n\t\t\tpostDatamonster : postDatamonster,\n\t\t\tpostSchema : postSchema,\n\t\t\tdeleteItem : deleteItem,\n\t\t\tsetAvailableLesson : setAvailableLesson,\n\t\t\tgetAvailableLessons : getAvailableLessons\n\t\t};\n\n\t\tfunction setAvailableLesson(which)\n\t\t{\n\t\t\tavailableLesson = which;\n\t\t\tvoid 0;\n\t\t}\n\n\t\tfunction getAvailableLessons()\n\t\t{\n\t\t\treturn availableLesson;\n\t\t}\n\n\t\tfunction postJsonBulk(json)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\t$http.post(API_URL + '/postJsonBulk', json).then(function success(resp)\n\t\t\t\t\t{\n\t\t\t\t\t\tvoid 0;\n\t\t\t\t\t},\n\t\t\t\t\tfunction failure(err)\n\t\t\t\t\t{\n\t\t\t\t\t\tvoid 0;\n\t\t\t\t\t});\n\t\t\t}\n\t\t\tcatch(err)\n\t\t\t{\n\t\t\t\tvoid 0;\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t                function convertXml(thexml)\n        {\n         \treturn $http({method:\"POST\",url: IAF_URL + '/convertToJson',data: thexml ,headers:{\"Content-Type\":'application/xml'} }).then(function(data)\n\t        {\n\t          return data;\n\t        },function(error)\n\t        {\n\t          void 0;\n\t        });\n        }\n\n\n\t\tfunction postSchema()\n\t\t{\n\n\t\t\t\t\t}\n\n\t\tfunction postDatamonster(datamonster, thetag)\n        {\n          void 0;\n\n          \t  return  $http({method:\"POST\",url:IAF_URL +'/api/storejson',data:datamonster,headers:{'content-type':'application/json'}}).then(function success(resp)\n\t          {\n\t            void 0;\n\t            postTag(thetag);\n\t          },\n\t          function failure(err)\n\t          {\n\t            void 0;\n\t          });\n        }\n\n        function postTag(tag)\n        {\n        \treturn  $http.post(IAF_URL +'/api/postiaftag', tag).then(function success(resp)\n\t          {\n\t            void 0;\n\t          },\n\t          function failure(err)\n\t          {\n\t            void 0;\n\t          });\n        }\n\n\t\tfunction deleteItem(classname)\n\t\t{\n\t\t\treturn $http({method:\"GET\", url: IAF_URL + '/api/deleteiaftag/' + classname }).then(\n\t\t\t\tfunction success(res)\n\t\t\t\t{\n\t\t\t\t\treturn res;\n\t\t\t\t}, \n\t\t\t\tfunction failure(err)\n\t\t\t\t{\n\t\t\t\t\treturn err;\n\t\t\t\t});\n\t\t}\n\n\t});\n}());\n(function(){\n\n'use strict';\n    var app = angular.module('confab');\n    app.constant('PROJECTNAME','Ibis4Student');\n    app.constant('API_URL', \"http://localhost:3000\");\n\n\n    app.constant('DOWNLOAD_URL',\"/iaf/api/configurations/download/Ibis4Student\");\n    app.constant('UPLOAD_URL',\"/iaf/api/configurations\");\n\n\n\n\n    app.factory('StaticDataFactory', function(xmlTag, $http, StorageFactory, $interval) \n\n    {\n\n        var datasource = 'pipes';\n        var timerId = 0 ;\n        var themes = [\"twilight\", \"monokai\", \"neat\"];\n        var fontSizes = [12,13,14,15,16,17,18,19,20];\n        var thejson = null;\n        var selectedItem = null;\n        var IAF_URL = StorageFactory.getGetter('IAF_URL')();\n\n        var formattingSettings = {\n                \"indent_size\": 4,\n                \"xml\": {\n                    \"end_with_newline\": true,\n                    \"js\": {\n                        \"indent_size\": 2\n                    },\n                    \"css\": {\n                        \"indent_size\": 2\n                    }\n                },\n                \"css\": {\n                    \"indent_size\": 1\n                },\n                \"js\": {\n                 \"preserve-newlines\": true\n                }\n                };\n\n        return{\n            getJson : getJson,\n            getStaticJson : getStaticJson,\n            setDataSource: setDataSource,\n            getDataSource: getDataSource,\n            getFormattingSettings: getFormattingSettings,\n            getThemes: getThemes,\n            getFontSizes: getFontSizes,\n            setTimerId : setTimerId,\n            getTimerId : getTimerId,\n            stopTimer : stopTimer,\n            setSelectedItem : setSelectedItem,\n            getSelectedItem : getSelectedItem,\n            setIafUrl : setIafUrl\n\n        };\n\n        function setIafUrl()\n        {\n          IAF_URL = StorageFactory.getGetter(\"IAF_URL\")();\n        }\n\n        function setSelectedItem(item)\n        {\n          selectedItem = item;\n        }\n\n         function getSelectedItem()\n        {\n          return selectedItem;\n        }\n\n        function setTimerId(timerid)\n        {\n          timerId = timerid;\n        }\n\n        function getTimerId(timerid)\n        {\n          return timerId;\n        }\n\n\n        function stopTimer()\n        {\n          void 0;\n          $interval.cancel(timerId);\n          timerId = 0 ; \n        }\n\n        function getThemes()\n        {\n          return themes;\n        }\n\n        function getFontSizes()\n        {\n          return fontSizes;\n        }\n\n        function getFormattingSettings()\n        {\n          return formattingSettings;\n        }\n\n\n        function setDataSource(string)\n        {\n          datasource = string;\n        }\n\n        function getDataSource()\n        {\n          return datasource;\n        }\n\n\n        function getJson()\n        { \n\n\n                    return $http.get(IAF_URL + '/api/getjson').then(\n          function success(data)\n          {\n              void 0;\n              thejson = data.data.JSONMONSTER.MYMONSTER;\n              return data;\n          },\n          function fail(err)\n          {\n            void 0;\n          });\n\n        }  \n\n        function getStaticJson()\n        {\n          return thejson;\n        }\n\n\n\n\n    });\n\n     app.factory('ZipService', function (StorageFactory, $http ,DOWNLOAD_URL, UPLOAD_URL, PROJECTNAME)\n     {\n        var myslots;\n        var IAF_URL = StorageFactory.getGetter('IAF_URL')();\n        return {\n            init : init,\n            getSlots : getSlots,\n            getZip : getZip,\n            getZipFromFile : getZipFromFile,\n            sendZip : sendZip,\n            getMySlots : getMySlots,\n            setIafUrl : setIafUrl\n        };\n\n        function setIafUrl()\n        {\n          IAF_URL = StorageFactory.getGetter('IAF_URL')();\n        }\n\n        function init()\n        {\n            return StorageFactory.getGetter(\"thejson\")();\n        }\n\n        function getSlots()\n        {\n            return StorageFactory.getGetter(\"myslots\")();\n        } \n\n        function getMySlots()\n        {\n            return myslots;\n        } \n\n        function sendZip(saveas)\n        {\n                return new Promise(function(resolve, reject)\n                {\n                var zip = new JSZip();\n                var elements = document.querySelectorAll('[ui-tree-node]');\n\n\n                elements.forEach(function(item)\n                {\n                    var object = angular.element(item).scope();\n                    var parents = [];\n\n                    while(object.$parentNodeScope !== null)\n                    {\n                        parents.push(object.$parentNodeScope.$modelValue.title);\n                        object = object.$parentNodeScope;\n                    }\n\n                    var filename = \"\";\n                    while(parents.length > 0)\n                    {   \n                        filename += cropFilter(parents.pop()) + '/';\n                    }\n\n\n                    if(cropFilter(angular.element(item).scope().$modelValue.title) === 'Configuration.xml')\n                    {\n\n                                            filename = \"Ibis4Student/Configuration.xml\";\n                    }\n                    else\n                    {\n\n                                            filename =  filename + cropFilter(angular.element(item).scope().$modelValue.title) ;\n                    }\n\n                    if(angular.element(item).scope().$modelValue.isDirectory)\n                    {\n                        zip.folder(filename);\n                    }\n                    else\n                    {   \n                        var theslot = StorageFactory.getGetter(angular.element(item).scope().$modelValue.title)();\n                        zip.file(filename,StorageFactory.getGetter(theslot)());\n                    }\n                });\n                var timestamp = Date.now();\n                var text = \"configuration.version=\" + timestamp;\n                zip.file(\"BuildInfo_SC.properties\" , text);\n\n                void 0;\n\n\n                                              function cropFilter(item)\n                {\n                    if(item === undefined) return \"\";\n                    var helper = item.substring(item.lastIndexOf('/') + 1 ,item.length);\n                    if(helper.length > 0)\n                    {\n                        return helper;\n                    }\n                    else\n                    {\n                        return item;\n                    }\n                }\n\n                if(saveas)\n                {\n                  void 0;\n                  zip.generateAsync({type:\"blob\"}).then(function(myzip)\n                  {\n                    var blob = new Blob([myzip],{type:\"application/zip\"});\n                    void 0;\n                    saveAs(blob, \"configuration.zip\");\n                    resolve();\n                  });\n                }\n                else \n                {\n                  postConfig(zip, timestamp).then(function success(resp)\n                  {\n                    void 0;\n                    resolve(resp);\n                  },function failure(err)\n                  {\n                    void 0;\n                    reject(err);\n                  });\n                }\n                });\n        }\n\n\n        function postConfig(zip, timestamp)\n        {\n          return new Promise(function(resolve, reject)\n          {\n            if(IAF_URL === undefined || typeof IAF_URL !== 'string')\n            {\n              void 0;\n              return 'error';\n            }\n\n            var finalurl = IAF_URL + UPLOAD_URL;\n            void 0;            \n\n            zip.generateAsync({type:\"blob\"}).then(function(myzip)\n            {\n              var fileName = 'configuration.zip';\n              var fd = new FormData();\n\n\n                            fd.append(\"realm\", 'jdbc');\n              fd.append(\"name\", \"Ibis4Student\");\n              fd.append(\"version\", timestamp);\n              fd.append(\"encoding\", 'utf-8');\n              fd.append(\"multiple_configs\", false);\n              fd.append(\"activate_config\", true);\n              fd.append(\"automatic_reload\", true);\n              fd.append(\"file\", myzip, fileName);\n\n              void 0;\n              $http({method: 'POST',url:finalurl , data: fd , headers:{'Content-type': undefined}})\n              .then(function succes(response)\n              {\n                  void 0;\n                  resolve (response);\n              }, function failure(err)\n              {\n                  void 0;\n                  reject(err);\n              });\n\n              });\n\n            });\n\n        }\n\n\n        function getZipFromFile(file)\n        {\n          return JSZip.loadAsync(file).then(function(zip)\n            {\n              void 0;\n              StorageFactory.deleteAll();\n              var myzipfiles = [];\n\n              zip.forEach(function(relativePath, file)\n              {\n                if(file.name.substring(0,2) !== '__' && file.name !== PROJECTNAME +'/' && file.name !== 'BuildInfo_SC.properties')\n                {\n                  myzipfiles.push(file);\n                }\n              });\n\n              for(var i=0 ; i< myzipfiles.length; i++)\n              {\n                if(myzipfiles[i].name.indexOf(PROJECTNAME) > -1)\n                      {\n                        void 0;\n                        var item = myzipfiles[i].name;\n                        var helper = item.substring(item.lastIndexOf('/') + 1 ,item.length);\n                        myzipfiles[i].name = helper;\n                      }\n              }\n\n\n\n\n              storeZip(0);\n\n                            function storeZip(index)\n              {\n                if(index > myzipfiles.length-1)\n                {\n                  return;\n                }\n                else\n                {\n                  if(!(myzipfiles[index].dir))\n                  {\n                    myzipfiles[index].async(\"string\").then(function resolve(data)\n                    {\n                        var newslotname = \"slot\" + Math.ceil(Math.random()*1000);\n                        StorageFactory.getSetter(myzipfiles[index].name)(newslotname);\n                        StorageFactory.getSetter(newslotname)(data);\n                        index++;\n                        storeZip(index++);\n                    });\n                  }\n                  else\n                  {\n                    index++;\n                    storeZip(index);\n                  }\n                }\n              }                              \n\n              void 0;\n              var myjson=[];\n              myslots = {};\n\n              for(var i =0 ; i< myzipfiles.length ; i++)\n              {\n                if(myzipfiles[i].dir)\n                {\n                    myjson.push({\n                    id : Math.ceil(Math.random() * 10000),  \n                    isDirectory : myzipfiles[i].dir,\n                    title : myzipfiles[i].name.substring(0,myzipfiles[i].name.length-1),\n                    nodes : []\n                    });\n                }\n                else\n                {\n                  var myobj = {\n                    id : Math.ceil(Math.random() * 10000),\n                    isDirectory : myzipfiles[i].dir,\n                    title : myzipfiles[i].name,\n                    nodes : []\n                    };\n                  myjson.push(myobj);\n                  myslots[myobj.id] = {title:myobj.title, isLocked:false};\n                }\n              }\n\n              myjson.sort(function compare(val1, val2)\n              {\n                if(val1.title.split('/').length > val2.title.split('/').length)\n                {\n                  return -1;\n                }\n                if(val1.title.split('/').length < val2.title.split('/').length)\n                {\n                  return 1;\n                }\n                return 0;\n              });\n\n                var helper = 0;\n                var parentsfound = true; \n\n\n                while(parentsfound &&  helper <100)\n                {\n                  parentsfound = false;\n                  var copy = myjson;\n\n                  for(var index = 0 ; index < myjson.length; index ++)\n                  {\n                    for(var j=0 ; j< copy.length; j++)\n                    {\n                      if(isParent(myjson[index].title, copy[j].title))\n                      {\n                        myjson[index].nodes.push(copy[j]);\n                        myjson.splice(j,1);\n                        parentsfound = true;\n                        break;\n                      }\n                    }\n                    if(parentsfound)\n                    {\n                      break;\n                    }\n                  }\n                  helper ++;\n                }\n\n\n\n                function isParent(possibleparent, candidate)\n                {\n                  if(possibleparent === candidate)\n                  {\n                    return false;\n                  }\n                  var index = candidate.lastIndexOf('/');\n                  if(candidate.substring(0,index) === possibleparent)\n                  {\n                    return true;\n                  }\n                  else\n                  {\n                    return false;\n                  }\n                }\n\n                void 0;\n\n                StorageFactory.getSetter('thejson')(myjson);\n                StorageFactory.getSetter('myslots')(myslots);  \n                return(myjson); \n\n              });\n        }\n\n\n\n\n\n\n        function getZip()\n        {\n          var finalUrl = IAF_URL + DOWNLOAD_URL;\n          void 0;\n\n          return $http({method:\"GET\", url: finalUrl, responseType:'arraybuffer'}).then(function success(resp)\n          {\n            return new Promise(function (resolve, reject)\n            {\n            JSZip.loadAsync(resp.data).then(function(zip)\n            {\n              void 0;\n              StorageFactory.deleteAll();\n              var myzipfiles = [];\n\n              zip.forEach(function(relativePath, file)\n              {\n                if(file.name.substring(0,2) !== '__' && file.name !== PROJECTNAME +'/' && file.name !== 'BuildInfo_SC.properties')\n                {\n                  myzipfiles.push(file);\n                }\n              });\n\n              for(var i=0 ; i< myzipfiles.length; i++)\n              {\n                if(myzipfiles[i].name.indexOf(PROJECTNAME) > -1)\n                      {\n                        void 0;\n                        var item = myzipfiles[i].name;\n                        var helper = item.substring(item.lastIndexOf('/') + 1 ,item.length);\n                        myzipfiles[i].name = helper;\n                      }\n              }\n\n\n\n              storeZip(0);\n\n                            function storeZip(index)\n              {\n                if(index > myzipfiles.length-1)\n                {\n                  return;\n                }\n                else\n                {\n                  if(!(myzipfiles[index].dir))\n                  {\n                    myzipfiles[index].async(\"string\").then(function resolve(data)\n                    {\n                        var newslotname = \"slot\" + Math.ceil(Math.random()*1000);\n                        StorageFactory.getSetter(myzipfiles[index].name)(newslotname);\n                        StorageFactory.getSetter(newslotname)(data);\n                        index++;\n                        storeZip(index++);\n                    });\n                  }\n                  else\n                  {\n                    index++;\n                    storeZip(index);\n                  }\n                }\n              }                              \n\n              void 0;\n              var myjson=[];\n              myslots = {};\n\n              for(var i =0 ; i< myzipfiles.length ; i++)\n              {\n                if(myzipfiles[i].dir)\n                {\n                    myjson.push({\n                    id : Math.ceil(Math.random() * 10000),  \n                    isDirectory : myzipfiles[i].dir,\n                    title : myzipfiles[i].name.substring(0,myzipfiles[i].name.length-1),\n                    nodes : []\n                    });\n                }\n                else\n                {\n                  var myobj = {\n                    id : Math.ceil(Math.random() * 10000),\n                    isDirectory : myzipfiles[i].dir,\n                    title : myzipfiles[i].name,\n                    nodes : []\n                    };\n                  myjson.push(myobj);\n                  myslots[myobj.id] = {title:myobj.title, isLocked:false};\n                }\n              }\n\n              myjson.sort(function compare(val1, val2)\n              {\n                if(val1.title.split('/').length > val2.title.split('/').length)\n                {\n                  return -1;\n                }\n                if(val1.title.split('/').length < val2.title.split('/').length)\n                {\n                  return 1;\n                }\n                return 0;\n              });\n\n                var helper = 0;\n                var parentsfound = true; \n\n\n                while(parentsfound &&  helper <100)\n                {\n                  parentsfound = false;\n                  var copy = myjson;\n\n                  for(var index = 0 ; index < myjson.length; index ++)\n                  {\n                    for(var j=0 ; j< copy.length; j++)\n                    {\n                      if(isParent(myjson[index].title, copy[j].title))\n                      {\n                        myjson[index].nodes.push(copy[j]);\n                        myjson.splice(j,1);\n                        parentsfound = true;\n                        break;\n                      }\n                    }\n                    if(parentsfound)\n                    {\n                      break;\n                    }\n                  }\n                  helper ++;\n                }\n\n\n\n                function isParent(possibleparent, candidate)\n                {\n                  if(possibleparent === candidate)\n                  {\n                    return false;\n                  }\n                  var index = candidate.lastIndexOf('/');\n                  if(candidate.substring(0,index) === possibleparent)\n                  {\n                    return true;\n                  }\n                  else\n                  {\n                    return false;\n                  }\n                }\n\n                void 0;\n\n                StorageFactory.setCurrentKey(myslots[0]);\n                StorageFactory.getSetter('thejson')(myjson);\n                StorageFactory.getSetter('myslots')(myslots);  \n                resolve(myjson); \n\n              }, \n              function failure(err)\n              {\n                void 0;\n                reject(err);\n              });\n\n            });\n\n        },\n        function failure(err)\n        {\n          void 0;\n          return;\n        },function failure(err)\n        {\n          void 0;\n          return;\n        });\n\n      }\n\n     });\n\n\n\n\n    app.factory('StorageFactory',['storage', '$log', function(storage, $log)\n    {\n      var api = {};\n      var thekeys;\n      var thealiases = [\"file1\"];\n      var currentKey = \"slot1\";\n      var myaliases;\n\n            return {\n        getSetter : getSetter,\n        getGetter : getGetter,\n        verifyKey : verifyKey,\n        createAPIForKey : createAPIForKey,\n        createSetter : createSetter,\n        createGetter : createGetter,\n        getAliases : getAliases,\n        switchKey : switchKey,\n        setCurrentKey : setCurrentKey,\n        getCurrentKey : getCurrentKey,\n        getNewSlotname : getNewSlotname,\n        initialise : initialise,\n        deleteAll : deleteAll,\n        changeKeys : changeKeys\n      };\n\n      function changeKeys(oldname, newname)\n      {\n        void 0;\n        var index = -1;\n        var islocked = \"\";\n        for(var i= 0 ; i< thekeys.length ; i++)\n        {\n          if(thekeys[i].title === oldname)\n          {\n            index = i;\n            islocked = thekeys[i].isLocked;\n          }\n        }\n        if(index !== -1)\n        {\n          if(currentKey.title === oldname)\n          {\n            currentKey.title = newname;\n          }\n          thekeys[index].title = newname;\n        }\n        void 0;\n      }\n\n      function deleteAll()\n      {\n        var keys = storage.getKeys();\n        keys.forEach(function(key)\n        {\n          if(key !== 'IAF_URL')\n          {\n            getSetter(key)();\n          }\n        });\n      }\n\n      function switchKey()\n      {\n          var helper = thekeys.shift();\n          thekeys.push(helper);\n          currentKey = thekeys[0];\n          return thekeys[0];\n      }\n\n      function removeKey(itsAlias)\n      {\n        var index;\n        for(var i =0 ; i< thekeys.length; i++)\n        {\n          if(thekeys[i].title === itsAlias)\n          {\n              index = i;\n          }\n        }\n        thekeys.splice(index, 1);\n\n        if(currentKey.title === itsAlias)\n        {\n          currentKey = thekeys[0];\n        }\n      }\n\n\n\n\n      function getNewSlotname(createdAlias, theid)\n      {\n        void 0;\n        var newslotname = \"slot\" + Math.ceil(Math.random()*1000);\n        var theobject = { \"title\" : createdAlias, \"isLocked\" : false };\n        thekeys.push(theobject);\n        getSetter(newslotname)('<?xml version=\"1.0\" encoding=\"UTF-8\"?>');\n        getSetter(createdAlias)(newslotname);\n        var helper = getGetter(\"myslots\")();\n        helper[theid] = theobject;\n        getSetter(\"myslots\")(helper);\n        return newslotname;\n      }\n\n      function initialise()\n      {\n        if(storage.getKeys().length === 0)\n        {\n          getSetter(\"slot1\")(\" start here...\");\n          getSetter(\"file1\")(\"slot1\");\n          var thejson = [\n                          {\n                            \"id\": 1,\n                            \"title\": \"dir1\",\n                            \"isDirectory\": true,\n                            \"nodes\": [\n                              {\n                                \"id\": 2,\n                                \"title\": \"file1\",\n                                \"isDirectory\": false,\n                                \"isLocked\": false,\n                                \"nodes\": []\n                              }\n                            ]\n                          }\n                        ];\n          var myslots = { 2 : {\"title\":\"file1\",isLocked:false} };              \n          getSetter(\"thejson\")(thejson);\n          getSetter(\"myslots\")(myslots);\n          thekeys = createKeys([\"file1\"]);\n        }\n        else\n        {\n          var helper = storage.getKeys();\n\n          if(helper.indexOf(\"ngIdle.expiry\") > -1)\n          {\n              helper.splice(helper.indexOf(\"ngIdle.expiry\"),1);\n          }  \n\n          if(helper.indexOf(\"thejson\") > -1)\n          {\n              helper.splice(helper.indexOf(\"thejson\"),1);\n          }  \n          if(helper.indexOf(\"myslots\") > -1)\n          {\n              helper.splice(helper.indexOf(\"myslots\"),1);\n          } \n          if(helper.indexOf(\"IAF_URL\") > -1)\n          {\n              helper.splice(helper.indexOf(\"IAF_URL\"),1);\n          } \n\n          thekeys = createKeys(helper); \n        }\n        currentKey = thekeys[0];\n      }\n\n\n      function getAliases()\n      {\n        var output = [];\n\n        thealiases.forEach(function(value)\n        {\n          output.push(getGetter(value)());\n        });\n\n      return output;  \n      }\n\n\n      function setCurrentKey(key)\n      {\n       void 0; \n        currentKey = key;\n      }\n\n      function getCurrentKey()\n      {\n        return currentKey;\n      }      \n\n\n      function createKeys(helper)\n      {\n        var result = [];\n        helper.forEach(function(val)\n        {\n          if(val.substring(0,4) !== 'slot' )\n          {\n            result.push({\"title\" : val, \"isLocked\" : false});\n          }\n        });\n        return result;\n      }\n\n      function getSetter(key)\n      {\n        verifyKey(key);\n        return api[key].setter;\n      }\n      function getGetter(key)\n      {\n        verifyKey(key);\n        return api[key].getter;\n      }\n\n      function verifyKey(key)\n      {\n        if(!key || angular.isUndefined(key))\n        {\n          throw new Error(\"Key[ \" + key + \" ] is invalid\");\n        }\n\n        if(!api.hasOwnProperty(key))\n        {\n          createAPIForKey(key);\n        }\n\n\n      }\n\n      function createAPIForKey(key)\n      {\n        var setter = createSetter(key);\n        var getter = createGetter(key);\n        api[key] = \n        {\n          setter : setter,\n          getter : getter\n        };\n      }\n\n      function createSetter(key)\n      {\n        return function(value)\n        {\n          if(angular.isDefined(value))\n          {\n            try\n            {\n              storage.set(key, value);\n            }\n            catch(error)\n            {\n              $log.info('[StorageFactory]' + error.message);\n            }\n          }\n          else\n          {\n            storage.remove(key);\n          }\n        };\n      }\n\n      function createGetter(key)\n      {\n        return function()\n        {\n          var value = storage.get(key);\n          if(value === null)\n          {\n            value = undefined;\n            var setter = api[key].setter;\n            setter(value);\n          }\n          return value;\n        };\n      }\n    }]);\n    app.factory('EditorFactory', function()\n    {\n    var editor = null;  \n\n            return {\n        editorLoaded : editorLoaded\n      };\n\n      function editorLoaded(_editor)\n      {\n                var _doc = _editor.getDoc();\n                _editor.focus();\n                _editor.setOption('lineNumbers', true);\n                _editor.setOption('lineWrapping', true);\n                _editor.setOption('mode', 'xml');\n                _editor.setOption('beautify', 'true');\n                _editor.setOption('theme', 'twilight');\n                _editor.setOption('foldGutter', true);\n                _editor.setOption('gutters',[ \"CodeMirror-linenumbers\",\"CodeMirror-foldgutter\"]);\n                _editor.setOption('matchTags', {bothTags: true});\n                var extraKeys =  {\n                          \"'<'\": completeAfter,\n                          \"'/'\": completeIfAfterLt,\n                          \"' '\": completeIfInTag,\n                          \"'='\": completeIfInTag,\n                          \"Ctrl-Space\": \"autocomplete\"\n                                };\n                _editor.setOption('extraKeys', extraKeys);\n\n                void 0;\n\n                var windowheight = window.innerHeight;\n                var navbarheight = document.getElementById('mynavbar').offsetHeight;\n                var ed = document.querySelector('.CodeMirror');\n                ed.style.height = (windowheight - navbarheight) + 'px'; \n                void 0;\n\n                function completeAfter(cm, pred) \n                {\n                    var cur = cm.getCursor();\n                    if (!pred || pred()) setTimeout(function() \n                    {\n                        if (!cm.state.completionActive)\n                        cm.showHint({completeSingle: false});\n                    }, 100);\n                    return CodeMirror.Pass;\n                }\n\n                function completeIfAfterLt(cm) \n                {\n                    return completeAfter(cm, function() \n                    {\n                        var cur = cm.getCursor();\n                        return cm.getRange(CodeMirror.Pos(cur.line, cur.ch - 1), cur) == \"<\";\n                    });\n                }\n\n                function completeIfInTag(cm) \n                {\n                return completeAfter(cm, function() \n                {\n                    var tok = cm.getTokenAt(cm.getCursor());\n                    if (tok.type == \"string\" && (!/['\"]/.test(tok.string.charAt(tok.string.length - 1)) || tok.string.length == 1)) return false;\n                    var inner = CodeMirror.innerMode(cm.getMode(), tok.state).state;\n                    return inner.tagName;\n                });\n\n              }\n              return _editor;\n            }\n\n    });\n    app.factory('ValidationFactory', function(StorageFactory, $http )\n    {\n      return {\n        validateXml : validateXml\n      };\n\n      function validateXml()\n      {\n\n      }\n    });\n    app.factory('IafFactory', function($http, StorageFactory, StaticDataFactory, ZipService, UPLOAD_URL)\n    {\n\n          var uname = null;\n    var pw = null;\n    var IAF_URL = StorageFactory.getGetter('IAF_URL')();\n      return{\n        postConfig : postConfig,\n        setCredentials : setCredentials,\n      };\n\n      function postConfig(zip)\n      {\n        return new Promise(function(resolve, reject)\n        {\n          var finalurl = IAF_URL + UPLOAD_URL;\n          void 0;\n        zip.generateAsync({type:\"blob\"}).then(function(myzip)\n        {\n          var fileName = 'configuration.zip';\n          var fd = new FormData();\n          fd.append(\"realm\", 'jdbc');\n          fd.append(\"name\", \"Ibis4Student\");\n          fd.append(\"version\", 1);\n          fd.append(\"encoding\", 'utf-8');\n          fd.append(\"multiple_configs\", false);\n          fd.append(\"activate_config\", true);\n          fd.append(\"automatic_reload\", true);\n          fd.append(\"file\", myzip, fileName);\n\n\n          return new Promise(function(resolve, reject)\n          {\n             void 0;\n              return $http({method: 'POST',url:finalurl , data: fd , headers:{'Content-type': undefined}}\n                  ).then(function succes(response)\n                  {\n                      void 0;\n                      resolve (response);\n                  }, function failure(response)\n                  {\n                      void 0;\n                      reject(response);\n                  });\n                });           \n          });\n        resolve();\n        });\n\n\n\n      }\n\n      function setCredentials(server, uname, pw)\n      {\n        void 0;\n        return new Promise(function(resolve, reject)\n        {\n          if (server)\n          {\n            void 0;\n            IAF_URL = server;\n            StorageFactory.getSetter('IAF_URL')(server);\n            StaticDataFactory.setIafUrl();\n            if(StaticDataFactory.getStaticJson() === null || StaticDataFactory.getStaticJson() === undefined)\n            {\n              StaticDataFactory.getJson().then(function success(resp)\n              {\n                void 0;\n                resolve(resp);\n              },\n              function failure(err)\n              {\n                 void 0;\n                 reject(err);\n              });\n            }\n          }\n          else\n          {\n            void 0;\n          }\n        });\n      }\n    });\n\n})();   \n(function ()\n{\n    'use strict';\n    angular.module('confab')\n        .controller('ApsTreeController', function ($scope,$uibModal, ZipService, StorageFactory,StaticDataFactory, IafFactory,$timeout)\n        {\n\n            void 0;\n            var vm2 = this;\n            vm2.remove = remove;\n            vm2.toggle = toggle;\n            vm2.setSelectedSlot = setSelectedSlot;\n            vm2.changeName = changeName;\n            vm2.newSubitem = newSubitem;\n            vm2.modifyAlias = modifyAlias;\n            vm2.getZip = getZip;\n            vm2.addFileOrFolder = addFileOrFolder;\n            vm2.saveToFile= saveToFile;\n            vm2.showZipDialog = showZipDialog;\n\n            vm2.treeOptions =\n            {\n\n                               };\n\n            init();\n\n            function showZipDialog()\n            {\n\n                var modalInstance = $uibModal.open(\n                {\n                    templateUrl : \"./views/loadzipdialog.html\",\n                    controller : \"LoadZipController as vm3\",\n                    size : \"md\",\n                    resolve : {items : function ()\n                        {\n                            return \"something\";\n                        }}\n                });\n\n\n                modalInstance.rendered.then(\n                function success(resp)\n                {\n                var zipfromfile = document.getElementById('zipfromfile');\n                void 0;\n                zipfromfile.addEventListener('change', function(event)\n                {\n                    void 0;\n                    modalInstance.close({returntype:\"viafile\"});\n                    StaticDataFactory.stopTimer();\n                    ZipService.getZipFromFile(event.target.files[0]).then(function success(resp)\n                    {\n                        void 0;\n                        vm2.list = resp;\n                        void 0;\n                        vm2.mySlots = ZipService.getMySlots();\n                        var keys = Object.keys(vm2.mySlots);\n                        StorageFactory.setCurrentKey(vm2.mySlots[keys[0]]);\n                        setSelectedSlot({id:keys[0]});\n\n\n                    },function failure(err)\n                    {\n                        void 0;\n                    });\n\n                });    \n                },function failure(err)\n                {\n\n                                    });\n\n\n\n\n                modalInstance.result.then(function success(resp)\n                {\n                    void 0;\n                    if(resp.returntype === 'viahttp')\n                    {\n                        vm2.list = resp.data;\n                        vm2.mySlots = ZipService.getMySlots();\n                        var keys = Object.keys(vm2.mySlots);\n                        setSelectedSlot({id:keys[0]}) ;\n                        void 0;\n                    }\n\n                    },function failure(err)\n                    {\n                        void 0;\n                    });\n            }\n\n\n            function saveToFile()\n            {\n                ZipService.sendZip(true).then(function success(resp)\n                {\n                    void 0;    \n                },\n                function failure(err)\n                {\n                    void 0;\n                });\n            }\n\n            function addFileOrFolder(item)\n            {\n                var thetype = (item === 'file'? false : true);\n\n\n               var newobject = {\n                            id: Math.floor(Math.random()*10000) ,\n                            title: item + createRandomSuffix(),\n                            isDirectory : thetype,\n                            isLocked : false,\n                            nodes: []\n                            };\n               vm2.list.push(newobject);\n               if(item === 'file')\n               {\n                   StorageFactory.getNewSlotname(newobject.title, newobject.id);\n                   vm2.mySlots[newobject.id] = {\"title\" : newobject.title,\"isLocked\": false};\n                   setSelectedSlot(newobject);\n               }\n            }\n\n\n\n\n            function init()\n            {\n                vm2.list = StorageFactory.getGetter(\"thejson\")();\n                vm2.mySlots = StorageFactory.getGetter(\"myslots\")();\n            }\n\n\n\n            function getZip()\n            {\n                void 0;\n                ZipService.getZip().then(function success(data)\n                {\n                    void 0;\n                    vm2.list = data;\n                    vm2.mySlots = ZipService.getMySlots();\n                    var keys = Object.keys(vm2.mySlots);\n                    setSelectedSlot({id:keys[0]}) ;\n                    void 0;\n                }, function fail(err)\n                {\n                    void 0;\n                });\n            }\n\n            $scope.$on('KeySwitch', function(event, key)\n            {\n                var thekeys = Object.keys(vm2.mySlots);\n                void 0;\n                for(var i=0 ;i < thekeys.length; i++)\n                {\n\n                    if(vm2.mySlots[thekeys[i]].title == key.title)\n                    {\n                        void 0;\n\n                        var helper = \n                        {\n                            id:thekeys[i],\n                            title:thekeys[i].title,\n                            isLocked:thekeys,\n                            nodes:[],\n                            isDirectory:false\n                        };\n\n                        setSelectedSlot(helper);\n                    }\n                }\n\n            });\n\n            $scope.$watch('vm2.selectedSlot', function()\n            {\n                void 0;\n            });\n\n            $scope.$watch('vm2.list', function()\n            {\n                void 0;\n                StorageFactory.getSetter(\"thejson\")(vm2.list);\n            }, true);\n\n            function modifyAlias(slotn, newname)\n            {\n                void 0;\n                StorageFactory.getSetter(slotn)(newname);\n            }\n\n\n\n            function setSelectedSlot(object)\n            {\n                    void 0;\n                if(object.hasOwnProperty('id'))\n                {\n                    $scope.$emit('saveOldValues');\n                    vm2.selectedSlot = object.id;\n                    StorageFactory.setCurrentKey(vm2.mySlots[vm2.selectedSlot]);\n                    $scope.$emit('Keychange');\n                }\n                else\n                {\n                    if(!(object.isDirectory))\n                    {\n                        $scope.$emit('saveOldValues');\n                        vm2.selectedSlot = object.$modelValue.id;\n                        StorageFactory.setCurrentKey(vm2.mySlots[vm2.selectedSlot]);\n                        $scope.$emit('Keychange');\n                    }\n                }    \n                void 0;\n            }\n\n\n            function changeName(item)\n            {\n                var element = document.getElementById('treeitem' + item.$modelValue.id);\n                element.setAttribute('contentEditable', true);\n                var textnode = element.firstChild;\n                var caret = textnode.length;\n                var range = document.createRange();\n                range.setStart(textnode, 0);\n                range.setEnd(textnode, caret);\n                var sel = window.getSelection();\n                sel.removeAllRanges();\n                sel.addRange(range);\n                void 0;\n                element.focus();\n            }\n\n\n            function remove(object)\n            {\n                var theid = object.$modelValue.id;\n                var parking = getRoot(object);\n                var nodetype = object.$modelValue.isDirectory;\n                var counter = 0;\n\n                if(nodetype)\n                {\n                    var currentLayer = object;\n\n                    while(currentLayer !== null && counter < 10)\n                    {\n                          if(lookForDirectory(currentLayer.$parentNodesScope.$modelValue, object.$modelValue.id))\n                            {\n                                void 0;\n                                var results = deleteContainingFiles(object);\n                                void 0;\n\n                                if(results.length < Object.keys(vm2.mySlots).length)\n                                {   \n                                    results.forEach(function(item)\n                                    {\n                                        deleteFromLocalStorage(item);\n                                        delete vm2.mySlots[item];\n                                    });\n                                    object.remove();\n                                }\n                                break;\n                            }\n                          else\n                          {\n                            currentLayer = currentLayer.$parentNodeScope;\n                            void 0;\n                          }    \n                          counter++;\n                    }\n                }\n                else\n                {\n                    if(traverseArray(parking.$parentNodesScope.$modelValue, false))\n                    {\n                        void 0;\n                        deleteFromLocalStorage(object.$modelValue.id);\n                        delete vm2.mySlots[object.$modelValue.id]; \n                        object.remove(); \n                    }\n                }\n\n                function deleteFromLocalStorage(itsid)\n                {\n                    var thealias = vm2.mySlots[itsid].title;\n                    var theslot = StorageFactory.getGetter(thealias)();\n                    void 0;\n                    StorageFactory.getSetter(thealias)();\n                    StorageFactory.getSetter(theslot)();\n                    var myslots = StorageFactory.getGetter(\"myslots\")();\n                    delete myslots[itsid];\n                    StorageFactory.getSetter(\"myslots\")(myslots);\n                }\n\n\n                function deleteContainingFiles(object)\n                {\n                    var results = [];\n                    void 0;\n                    var array = object.$childNodesScope.$modelValue;\n\n                    findResults(array);\n\n                    function findResults(sublist)\n                    {\n                        for(var i=0 ; i< sublist.length; i++)\n                        {\n                            if(!(sublist[i].isDirectory))\n                            {\n                                results.push(sublist[i].id);\n                            }\n                            else\n                            {\n                                if(sublist[i].nodes.length > 0)\n                                {\n                                    findResults(sublist[i].nodes);   \n                                }\n                            }\n                        }\n                    }\n                     return results;  \n                }\n\n                function getRoot(obj)\n                {\n                    var parking = obj;\n                    while(parking.$parentNodeScope !== null)\n                    {\n                        parking = parking.$parentNodeScope ;\n                    }\n                    void 0;\n                    return parking;\n                }\n\n                function traverseArray(sublist, ok)\n                {\n\n                                        if(ok){return ok;}\n                    for(var i = 0 ; i<sublist.length; i++)\n                    {\n                        void 0;\n                        if(!(sublist[i].isDirectory) && sublist[i] !== object.$modelValue) \n                        {\n                            void 0;\n                            ok = true;\n                            break;\n                        }\n                        else\n                        {\n                            if(sublist[i].nodes.length > 0)\n                            {\n                                ok = traverseArray(sublist[i].nodes, ok);\n                            }\n                        }\n                    }\n                    return ok;\n                } \n\n                function lookForDirectory(sublist, callerid)\n                {\n                    for (var i = 0 ; i < sublist.length ; i ++)\n                    {\n                        if(sublist[i].isDirectory && sublist[i].id !== callerid)\n                        {\n                            void 0;\n                            return true;\n                        }\n                    }\n                }                 \n\n\n                            }\n\n            function toggle(item)\n            {\n               item.toggle();\n            }\n\n            function newSubitem(item)\n            {\n                var theitem = item.$modelValue;\n                void 0;\n\n                if(theitem.isDirectory)\n                {\n                    theitem.nodes.push({\n                    id: Math.floor(Math.random()*10000) ,\n                    title: theitem.title ,\n                    isDirectory : true,\n                    nodes: []\n                    });\n                }\n                else\n                {\n                    var theid = Math.floor(Math.random()*10000);\n                    var thetitle = theitem.title + '-' + createRandomSuffix();\n                    var newobject = {\n                            id: theid ,\n                            title: thetitle,\n                            isDirectory : false,\n                            isLocked : false,\n                            nodes: []\n                            };\n\n\n                    if(item.$parentNodeScope !== null)\n                    {\n                        item.$parentNodeScope.$modelValue.nodes.push(newobject);\n                    }\n                    else\n                    {\n                        vm2.list.push(newobject);\n                    }\n                    StorageFactory.getNewSlotname(thetitle, theid);\n                    vm2.mySlots[theid] = {\"title\" : thetitle,\"isLocked\": false};\n                    setSelectedSlot(newobject);\n                }\n            }\n\n\n            function createRandomSuffix()\n            {\n                var suffixes = \"abcdefghijklmnopqrstuvwxyzABCDEFGHILJKLMNOPRSTUVWXYZ\";\n                var result = \"\";\n                for(var i=0 ; i<3; i++)\n                {\n                    var randomdigit = Math.floor(Math.random()*suffixes.length);\n                    var letter = suffixes.substring(randomdigit,randomdigit + 1);\n                    result += letter;\n                }\n                return result;\n            }\n\n\n        })\n\n        .controller('LoadZipController', function($uibModalInstance, ZipService, items)\n            {\n                var vm3 = this;\n                vm3.closeModal = closeModal;\n                vm3.getZipOverHttp = getZipOverHttp;\n\n                function getZipOverHttp()\n                {\n                    void 0;\n                    ZipService.getZip().then(function success(data)\n                    {\n                        void 0;\n                        $uibModalInstance.close({returntype:\"viahttp\",data:data});\n\n                                            }, function fail(err)\n                    {\n                        void 0;\n                    });\n                }                \n\n\n\n                                function closeModal()\n                {\n                    $uibModalInstance.close(\"dialog cancelled.\");\n                }\n            })\n\n\n\n        .filter('cropFilter', function()\n        {\n            return function(item)\n            {\n                if(item === undefined) return \"\";\n                var helper = item.substring(item.lastIndexOf('/') + 1 ,item.length);\n                if(helper.length > 0)\n                {\n                    return helper;\n                }\n                else\n                {\n                    return item;\n                }\n            };\n        });\n\n})();\n\n(function ()\n{\n\nangular.module('confab')\n\n    .factory('xmlTag', function() \n        {\n\n        var staticPipenames = [\"FixedQuerySender\", \"XmlWellFormedChecker\",\"XmlValidator\",\"XmlSwitch\",\"XmlIf\",\"WsdlXmlValidator\",\"RemoveFromSession\",\"PutSystemDateInSession\",\"PutInSession\",\"MailSender\",\"LogSender\",\"Json2XmlValidator\",\"JmsCommunicator\",\"PutParametersInSession\",\"IsolatedServiceExecutor\",\"IsolatedServiceCaller\",\"IfMultipart\",\"GetFromSession\",\"FixedResultSender\",\"FixedResult\",\"FilenameSwitch\",\"XmlParamSwitch\",\"EchoSender\"];\n\n\n        function xmlTag(elementname, proparray) \n        {\n            this.tagType = \"STARTTAG\";\n            this.elementName = elementname;\n            tagProperties = {};\n            proparray.forEach(function(prop)\n            {\n                tagProperties[prop.getAttributeName()] = prop.getAttributeValues();\n            }); \n            this.tagProperties = tagProperties; \n        }\n        xmlTag.prototype = \n        {\n            getTagType : function()\n            {\n                return this.tagType;\n            },\n            setTagType : function(astring)\n            {\n                switch (astring)\n                {\n                    case \"STARTTAG\":{this.tagType = \"STARTTAG\"; break;}\n                    case \"COMBITAG\":{this.tagType = \"COMBITAG\";break;}\n                    case \"ENDTAG\":{this.tagType = \"ENDTAG\";break;}\n                    default :{void 0;\n                                this.tagType = \"STARTTAG\";}\n                }\n            },\n            toCompleteTag : function()\n            {\n                var returnstring = \"\";  \n                var itsproperties = \"\"; \n                this.convertToPipe();\n\n                                angular.forEach(this.tagProperties, function(value, key)\n                {\n                    if (value == \"\")\n                    {\n                        itsproperties += \" \" + key + \"=\\\"\\\" \" + \" \";\n                    }\n                    else\n                    {\n                        itsproperties += \" \" + key + \"=\\\"\" + value + '\\\"';   \n                    }\n\n                });\n             returnstring =                     \"<\" + \n                                        this.elementName + \n                                        itsproperties + \n                                        \"></\" +\n                                        this.elementName + \n                                        \">\" ;\n\n\n                                                        return returnstring;                           \n\n\n            },\n            toObject : function()\n            {\n                var theobject = {} ;\n                theobject[this.elementName] = this.tagProperties;\n                void 0;\n                return theobject;\n            },\n            setProperty :function (key, value)\n            {\n                this.tagProperties[key] = value;\n            },\n            getPropertyValue :function (key)\n            {\n                return this.tagProperties[key];\n            },\n            convertToPipe: function()\n            {\n                if (this.elementName.search( /^.*Pipe$/ ) !== -1)\n                {\n                    this.elementName = \"pipe\"; \n                }\n\n                if(staticPipenames.includes(this.elementName))\n                {\n                    this.elementName = \"pipe\";    \n                }\n\n                var regex = \"/^.*Pipe$/\";\n                void 0;\n\n            }\n\n        };\n        return (xmlTag);\n        })\n\n    .factory('attributeObject', function()\n    {\n        function attributeObject(attributename, values, hasDefault)\n        {\n            this.name = attributename;\n\n                        if(values !== undefined)\n            {\n                this.values = values;\n            }\n            else\n            {\n                this.values = [];\n            }\n            if (hasDefault !== undefined)\n            {\n                this.hasDefault = hasDefault;\n            }\n            else \n            {\n                this.hasDefault = false;\n            }\n        }\n\n        attributeObject.prototype = \n        {\n            setAttributeValue : function(value)\n            {\n                if (this.hasDefault)\n                {\n                    this.values.unShift(value);\n                }\n                else \n                {\n                    this.values.push(value);\n                }\n            },\n\n            insertValues : function(array)\n            {\n               this.values = array; \n            },\n\n            getAttributeName : function()\n            {\n                return this.name;\n            },\n\n            getAttributeValues : function()\n            {\n                return this.values;\n            },\n\n                        setDefaultValue : function(bool)\n            {\n                this.hasDefault = bool ;\n            },\n\n            toString : function()\n            {\n                return this.name + 'Allowed values:' + this.values.join();\n            }\n        };\n\n\n        return(attributeObject);\n\n\n\n\n\n\n\n            });\n\n})();"],"sourceRoot":"/source/"}